<!DOCTYPE html>
<html><head><title>cosmos 중간보고서</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="cosmos 중간보고서"/><meta property="og:description" content="요약 § 이번 프로젝트는 ARM 아키텍처에서 운영되는 간단한 커널을 Rust로 제작하는 것이다. 이를 통해 ARM 아키텍처에 대해서 학습하고, 운영체제 전반의 구조를 직접 제작해보며 운영체제에 대한 이해도를 향상시킬 것을 목적으로 한다. 더불어, 가급적 memory safe한 rust의 특징을 살려 잘못된 메모리 참조나 메모리 누수가 일어나지 않는 안전한 커널을 만들 수 있을 것으로 기대해본다."/><meta property="og:image" content="https://tech.parkjb.com/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="요약 § 이번 프로젝트는 ARM 아키텍처에서 운영되는 간단한 커널을 Rust로 제작하는 것이다. 이를 통해 ARM 아키텍처에 대해서 학습하고, 운영체제 전반의 구조를 직접 제작해보며 운영체제에 대한 이해도를 향상시킬 것을 목적으로 한다. 더불어, 가급적 memory safe한 rust의 특징을 살려 잘못된 메모리 참조나 메모리 누수가 일어나지 않는 안전한 커널을 만들 수 있을 것으로 기대해본다."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../../static/contentIndex.json").then(data => data.json())</script></head><div>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8XEDCYQX45"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8XEDCYQX45');
</script>
</div><body data-slug="Projects/Cosmos-(ongoing)/00_Mid-Report"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title "><a href="../..">🪴 PARKJB TECH</a></h1><div class="spacer mobile-only"></div><div class="darkmode "><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="search "><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;ARM&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Exceptions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Instructions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Registers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Registers/Program-Status-Registers-(PSR)&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Flutter&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Kernel-APIs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Kernel-Labs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Linux-Commands&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cookie&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)/Appendix&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)/Daily-Notes&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/OS-Assignments&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/WePlan&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;뒤죽박죽&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM"><a href="../../ARM" data-for="ARM" class="folder-title">ARM</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Exceptions"><a href="../../ARM/Exceptions" data-for="Exceptions" class="folder-title">Exceptions</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Exceptions"><li><a href="../../ARM/Exceptions/Exception-Handling-Registers" data-for="ARM/Exceptions/Exception-Handling-Registers">Exception Handling Registers</a></li><li><a href="../../ARM/Exceptions/Exception-Levels" data-for="ARM/Exceptions/Exception-Levels">Exception Levels</a></li><li><a href="../../ARM/Exceptions/Exception-Vector-Table" data-for="ARM/Exceptions/Exception-Vector-Table">Exception Vector Table</a></li><li><a href="../../ARM/Exceptions/Interrupt" data-for="ARM/Exceptions/Interrupt">Interrupt</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Instructions"><a href="../../ARM/Instructions" data-for="Instructions" class="folder-title">A-Profile A64 Instructions</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Instructions"><li><a href="../../ARM/Instructions/cmp" data-for="ARM/Instructions/cmp">cmp</a></li><li><a href="../../ARM/Instructions/DMB-DSB-ISB" data-for="ARM/Instructions/DMB-DSB-ISB">DMB DSB ISB</a></li><li><a href="../../ARM/Instructions/MRS-MSR" data-for="ARM/Instructions/MRS-MSR">MSR MSR</a></li><li><a href="../../ARM/Instructions/STP" data-for="ARM/Instructions/STP">STP</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Registers"><a href="../../ARM/Registers" data-for="Registers" class="folder-title">A-Profile Registers</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Registers"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Registers/Program-Status-Registers-(PSR)"><a href="../../ARM/Registers/Program-Status-Registers-(PSR)" data-for="Program-Status-Registers-(PSR)" class="folder-title">Program Status Registers</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Registers/Program-Status-Registers-(PSR)"><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/APSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/APSR">APSR</a></li><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/CPSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/CPSR">CPSR</a></li><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/SPSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/SPSR">SPSR</a></li></ul></div></li><li><a href="../../ARM/Registers/DAIF" data-for="ARM/Registers/DAIF">DAIF</a></li><li><a href="../../ARM/Registers/HCR_EL2" data-for="ARM/Registers/HCR_EL2">HCR_EL2</a></li><li><a href="../../ARM/Registers/SPSel" data-for="ARM/Registers/SPSel">SPSel</a></li><li><a href="../../ARM/Registers/VBAR_EL1" data-for="ARM/Registers/VBAR_EL1">VBAR_EL1</a></li></ul></div></li><li><a href="../../ARM/Learn-The-Architecture" data-for="ARM/Learn-The-Architecture">Learn The Architecture</a></li><li><a href="../../ARM/Processor-Modes" data-for="ARM/Processor-Modes">Processor Modes</a></li><li><a href="../../ARM/Timer" data-for="ARM/Timer">Timer</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Flutter"><a href="../../Flutter" data-for="Flutter" class="folder-title">Flutter</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Flutter"><li><a href="../../Flutter/Architecture" data-for="Flutter/Architecture">Architecture</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux"><a href="../../Linux" data-for="Linux" class="folder-title">Linux</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Kernel-APIs"><a href="../../Linux/Kernel-APIs" data-for="Kernel-APIs" class="folder-title">Kernel API</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Kernel-APIs"><li><a href="../../Linux/Kernel-APIs/kernel-↔-user" data-for="Linux/Kernel-APIs/kernel-↔-user">kernel ↔ user</a></li><li><a href="../../Linux/Kernel-APIs/mknod" data-for="Linux/Kernel-APIs/mknod">mknod</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Kernel-Labs"><a href="../../Linux/Kernel-Labs" data-for="Kernel-Labs" class="folder-title">Kernel Labs</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Kernel-Labs"><li><a href="../../Linux/Kernel-Labs/00_Introduction" data-for="Linux/Kernel-Labs/00_Introduction">Introduction</a></li><li><a href="../../Linux/Kernel-Labs/03_Character-Device-Drivers" data-for="Linux/Kernel-Labs/03_Character-Device-Drivers">Character Device Drivers</a></li><li><a href="../../Linux/Kernel-Labs/04_IO-access-and-Interrupts" data-for="Linux/Kernel-Labs/04_IO-access-and-Interrupts">I/O access and Interrupts</a></li><li><a href="../../Linux/Kernel-Labs/05_Deferred-Work" data-for="Linux/Kernel-Labs/05_Deferred-Work">Deferred Work</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Linux-Commands"><a href="../../Linux/Linux-Commands" data-for="Linux-Commands" class="folder-title">Linux Commands</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Linux-Commands"><li><a href="../../Linux/Linux-Commands/Linux-BIOS" data-for="Linux/Linux-Commands/Linux-BIOS">Linux BIOS</a></li><li><a href="../../Linux/Linux-Commands/rsync" data-for="Linux/Linux-Commands/rsync">rsync</a></li><li><a href="../../Linux/Linux-Commands/Upgrade-Debian" data-for="Linux/Linux-Commands/Upgrade-Debian">Upgrade Debian</a></li></ul></div></li><li><a href="../../Linux/ELF" data-for="Linux/ELF">ELF</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects"><a href="../../Projects" data-for="Projects" class="folder-title">Projects</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cookie"><a href="../../Projects/Cookie" data-for="Cookie" class="folder-title">Cookie</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cookie"><li><a href="../../Projects/Cookie/0314_아이디어발표" data-for="Projects/Cookie/0314_아이디어발표">3/14 아이디어 발표</a></li><li><a href="../../Projects/Cookie/0328_발표" data-for="Projects/Cookie/0328_발표">3/28 5주차 발표</a></li><li><a href="../../Projects/Cookie/0411_발표" data-for="Projects/Cookie/0411_발표">4/11 7주차 발표</a></li><li><a href="../../Projects/Cookie/0425_발표" data-for="Projects/Cookie/0425_발표">4/25 9주차 발표</a></li><li><a href="../../Projects/Cookie/0509_발표" data-for="Projects/Cookie/0509_발표">5/9 13주차 발표</a></li><li><a href="../../Projects/Cookie/0523_발표" data-for="Projects/Cookie/0523_발표">5/23 15주차 발표</a></li><li><a href="../../Projects/Cookie/0613_발표" data-for="Projects/Cookie/0613_발표">6/13 18주차 발표</a></li><li><a href="../../Projects/Cookie/0620_최종발표" data-for="Projects/Cookie/0620_최종발표">6/20 1학기 최종발표</a></li><li><a href="../../Projects/Cookie/0911_소개발표" data-for="Projects/Cookie/0911_소개발표">9/11 2학기 소개발표</a></li><li><a href="../../Projects/Cookie/0925_발표" data-for="Projects/Cookie/0925_발표">9/25 4주차 발표</a></li><li><a href="../../Projects/Cookie/1023_발표" data-for="Projects/Cookie/1023_발표">10/23 8주차 발표</a></li><li><a href="../../Projects/Cookie/1106_발표" data-for="Projects/Cookie/1106_발표">11/6 10주차 발표</a></li><li><a href="../../Projects/Cookie/1120_발표" data-for="Projects/Cookie/1120_발표">11/20 12주차 발표</a></li><li><a href="../../Projects/Cookie/1211_발표" data-for="Projects/Cookie/1211_발표">12/11 14주차 발표</a></li><li><a href="../../Projects/Cookie/1218_최종발표" data-for="Projects/Cookie/1218_최종발표">12/18 2학기 최종발표</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)"><a href="../../Projects/Cosmos-(ongoing)" data-for="Cosmos-(ongoing)" class="folder-title">Cosmos (ongoing)</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)/Appendix"><a href="../../Projects/Cosmos-(ongoing)/Appendix" data-for="Appendix" class="folder-title">Appendix</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)/Appendix"><li><a href="../../Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map" data-for="Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map">Virt Board Memory Map</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)/Daily-Notes"><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes" data-for="Daily-Notes" class="folder-title">Daily Notes</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)/Daily-Notes"><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28">2024-03-28</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29">2024-03-29</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-01" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-01">2024-04-01</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-03" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-03">2024-04-03</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-08" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-08">2024-04-08</a></li></ul></div></li><li><a href="../../Projects/Cosmos-(ongoing)/00_Mid-Report" data-for="Projects/Cosmos-(ongoing)/00_Mid-Report">cosmos 중간보고서</a></li><li><a href="../../Projects/Cosmos-(ongoing)/01_Intro" data-for="Projects/Cosmos-(ongoing)/01_Intro">Introduction</a></li><li><a href="../../Projects/Cosmos-(ongoing)/02_QEMU" data-for="Projects/Cosmos-(ongoing)/02_QEMU">QEMU 세팅</a></li><li><a href="../../Projects/Cosmos-(ongoing)/03_Booting" data-for="Projects/Cosmos-(ongoing)/03_Booting">Booting</a></li><li><a href="../../Projects/Cosmos-(ongoing)/04_Device-Tree" data-for="Projects/Cosmos-(ongoing)/04_Device-Tree">Device Tree</a></li><li><a href="../../Projects/Cosmos-(ongoing)/05_Bootloading" data-for="Projects/Cosmos-(ongoing)/05_Bootloading">Boot Loading</a></li><li><a href="../../Projects/Cosmos-(ongoing)/06_Interrupt-Handling-01" data-for="Projects/Cosmos-(ongoing)/06_Interrupt-Handling-01">Interrupt Handling 01</a></li><li><a href="../../Projects/Cosmos-(ongoing)/07_Interrupt-Handling-02" data-for="Projects/Cosmos-(ongoing)/07_Interrupt-Handling-02">Interrupt Handling 02</a></li><li><a href="../../Projects/Cosmos-(ongoing)/08_Interrupt-Handling-03" data-for="Projects/Cosmos-(ongoing)/08_Interrupt-Handling-03">Interrupt Handling 02</a></li><li><a href="../../Projects/Cosmos-(ongoing)/09_Memory-Layout" data-for="Projects/Cosmos-(ongoing)/09_Memory-Layout">Memory Layout</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/OS-Assignments"><a href="../../Projects/OS-Assignments" data-for="OS-Assignments" class="folder-title">OS Assignments</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/OS-Assignments"><li><a href="../../Projects/OS-Assignments/pa0" data-for="Projects/OS-Assignments/pa0">PA0: Warming up C programming</a></li><li><a href="../../Projects/OS-Assignments/pa1" data-for="Projects/OS-Assignments/pa1">PA1: My Amazing Shell</a></li><li><a href="../../Projects/OS-Assignments/pa2" data-for="Projects/OS-Assignments/pa2">PA2: Simulating Process Schedulers</a></li><li><a href="../../Projects/OS-Assignments/pa3" data-for="Projects/OS-Assignments/pa3">PA3: Virtual Memory Simulator</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/WePlan"><a href="../../Projects/WePlan" data-for="WePlan" class="folder-title">WePlan - 공동공간 예약 서비스</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/WePlan"><li><a href="../../Projects/WePlan/01_Project-Proposal" data-for="Projects/WePlan/01_Project-Proposal">Project Proposal</a></li><li><a href="../../Projects/WePlan/02_Requirements-Specification" data-for="Projects/WePlan/02_Requirements-Specification">Requirements Specification</a></li><li><a href="../../Projects/WePlan/03_Design-Document" data-for="Projects/WePlan/03_Design-Document">Design Document</a></li><li><a href="../../Projects/WePlan/04_Final-Project-Report" data-for="Projects/WePlan/04_Final-Project-Report">Final Project Report</a></li></ul></div></li><li><a href="../../Projects/Doge_Driver" data-for="Projects/Doge_Driver">Doge Driver</a></li><li><a href="../../Projects/Elevator-Controller" data-for="Projects/Elevator-Controller">엘레베이터 컨트롤러</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="뒤죽박죽"><a href="../../뒤죽박죽" data-for="뒤죽박죽" class="folder-title">🤪 뒤죽박죽</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="뒤죽박죽"><li><a href="../../뒤죽박죽/2024-02-네트워크-삽질" data-for="뒤죽박죽/2024-02-네트워크-삽질">2024-02 네트워크 삽질</a></li><li><a href="../../뒤죽박죽/Github-Actions" data-for="뒤죽박죽/Github-Actions">Github Actions 으로 obsidian-quartz 블로그 퍼블리시</a></li><li><a href="../../뒤죽박죽/OpenCV-on-mac" data-for="뒤죽박죽/OpenCV-on-mac">[OpenCV] Xcode OpenCV 설치 및 세팅</a></li><li><a href="../../뒤죽박죽/Rosetta+Conda-Env-Setting" data-for="뒤죽박죽/Rosetta+Conda-Env-Setting">[Conda] Rosetta + Conda Env 세팅</a></li><li><a href="../../뒤죽박죽/Rosetta+Conda-ROS-Setting" data-for="뒤죽박죽/Rosetta+Conda-ROS-Setting">[ROS] Rosetta + Conda로 ROS 세팅</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div><div class="recent-notes desktop-only"><h3>Recent Notes</h3><ul class="recent-ul"><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../../Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map" class="internal">Virt Board Memory Map</a></h3></div><p class="meta">Apr 30, 2024</p><ul class="tags"></ul></div></li><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28" class="internal">2024-03-28</a></h3></div><p class="meta">Apr 30, 2024</p><ul class="tags"></ul></div></li><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29" class="internal">2024-03-29</a></h3></div><p class="meta">Apr 30, 2024</p><ul class="tags"></ul></div></li></ul></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container " aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../Projects/">Projects</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../Projects/Cosmos-(ongoing)/">Cosmos (ongoing)</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>cosmos 중간보고서</a></div></nav><h1 class="article-title ">cosmos 중간보고서</h1><p class="content-meta ">Apr 27, 2024, 10 min read</p><div class="toc mobile-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#요약" data-for="요약">요약</a></li><li class="depth-0"><a href="#개요" data-for="개요">개요</a></li><li class="depth-0"><a href="#booting" data-for="booting">Booting</a></li><li class="depth-0"><a href="#interrupt" data-for="interrupt">Interrupt</a></li><li class="depth-0"><a href="#memory" data-for="memory">Memory</a></li><li class="depth-0"><a href="#references" data-for="references">References</a></li></ul></div></div></div></div><article class="popover-hint"><h1 id="요약">요약<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#요약" class="internal alias"> §</a></h1>
<p>이번 프로젝트는 ARM 아키텍처에서 운영되는 간단한 커널을 Rust로 제작하는 것이다. 이를 통해 ARM 아키텍처에 대해서 학습하고, 운영체제 전반의 구조를 직접 제작해보며 운영체제에 대한 이해도를 향상시킬 것을 목적으로 한다. 더불어, 가급적 memory safe한 rust의 특징을 살려 잘못된 메모리 참조나 메모리 누수가 일어나지 않는 안전한 커널을 만들 수 있을 것으로 기대해본다.</p>
<h1 id="개요">개요<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#개요" class="internal alias"> §</a></h1>
<p>프로젝트와 QEMU 세팅, Bootloading, Interrupt Handling 의 순으로 커널을 제작하였다. 초기에 프로젝트를 제작할 때에, X86기반의 커널을 제작하는 튜토리얼을 참고하였지만, ARM 아키텍처에 적용하기에는 아키텍처 의존성 때문에 어려움이 있어 이미 제작되어 있는 다른 ARM 아키텍처의 커널들을 참고하며 개발을 진행하게 되었다. 그 중, 대표적으로 hermit-os의 kernel과 bootloader에서 kernel의 부팅절차를 확인하였으며, raspberry pi용 os 제작 튜토리얼에서 주로 ARM의 어셈블리 코드를 참조하였다. 가급적 Linux의 방식을 모사하고 싶었지만, 커널의 규모가 너무 방대하여 최소한의 기능만 갖춘 위의 커널들을 주로 참고하였다.</p>
<h1 id="booting">Booting<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#booting" class="internal alias"> §</a></h1>
<p>X86의 부팅과정과 크게 다르지 않을 것이라고 생각하고 BIOS로 부팅하게 될 경우 16bit real mode에서 32bit protected mode로, 32bit protected mode에서 64bit long mode로 직접 transition 해주는 과정을 구현해야 될 것 같아 UEFI로 구현하려 하였다. 다음은 UEFI와 BIOS의 주요한 차이에 관한 내용이다.</p>
<ul>
<li>UEFI
<ul>
<li>Unified Extensible Firmware Interface</li>
<li>Requires EFI System Partition (ESP) to store <code>.efi</code> file</li>
<li><code>.efi</code> file includes all device initialization &amp; startup codes.. (could be kernel itself)</li>
<li>Uses GPT Partitioning scheme</li>
</ul>
</li>
<li>BIOS
<ul>
<li>Basic Input Output System</li>
<li>Uses MBR Partitioning Scheme</li>
<li>Legacy Way</li>
<li>Requires 16bit-32bit-64bit transition since it starts on 16bit mode (x86)</li>
</ul>
</li>
</ul>
<p>사실 ARM 아키텍쳐에서는 이러한 mode를 transition 하는 과정이 필요없다고 한다. UEFI 앱으로 빌드하여 개발을 하던 중, Interrupt 구현과정에서 어셈블리와 관련한 사소한 문제가 생겨 EFI 앱이 아닌 ELF앱으로 빌드하여 Bios로 부팅하기로 하였다. 결국, 기존의 구현하였던 UEFI 부분을 걷어낸 뒤, 일반적인 커널의 형태를 최대한 모사하기 위해서 Bootloader를 제작을 진행하려 하였고, 메모리에 로드된 Kernel ELF 의 주소를 직접 찾고, 매직넘버를 검사하여 올바른 ELF를 찾으면 이를 로드하는 방식으로 부팅하였다.</p>
<p>하지만, 메모리에서 Kernel ELF를 찾은 뒤, 로딩하는 과정에서 어려움이 있어 Bootloader가 통합된 하나의 Kernel ELF로 제작하기로 하였다. 이에 따라, 기존의 uefi로 부팅하던 qemu 세팅을 bios (기본값)으로 부팅하도록 세팅을 바꾸고, hermit-loader가 커널을 찾아서 로딩하는 부분과 hermit-kernel이 loader에서 넘겨받아 커널이 켜지는 부분을 역으로 참조하며 부팅을 진행할 수 있도록 하였다.</p>
<p>Hermit의 경우, linker script를 이용하여 entry point와 각 메모리들의 section을 명시해주었고, 초기 검증과정 등을 거친 후에 rust 코드로 branch하는 방식으로 개발되어 있었다. 본인 역시 이와 유사하게 진행하였으나, 추후 Exception Level 1으로 Transition하여 Exception Vector Table을 등록해야 되어, 이와 관련된 처리도 추가적으로 해주었다.</p>
<p>부팅이 완료된 후, stdout을 활성화시키기 위해서 0x40000000에 로드되어 있는 Device Tree를 참조하여 이를 담당하는 pl011 디바이스의 주소(0x09000000)를 찾아내고, 초기화 시켜주어 logging을 할 수 있었다.</p>
<h1 id="interrupt">Interrupt<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#interrupt" class="internal alias"> §</a></h1>
<p>ARM에서는 X86 아키텍처와는 다르게 Interrupt를 Exception의 일종으로 받아들인다. 따라서, X86의 Interrupt Descriptor Table이 존재하지 않고, Interrupt Request (IRQ) 혹은 Fast Interrupt Request (FIQ) 이 일어났을 때, Exception Vector Table를 참조하여 인터럽트에 대한 핸들러로 브랜치하고, 해당 핸들러에서 어떤 인터럽트인지 acknowledge를 한 이후, 이에 맞는 핸들러로 브랜치 시키는 방식을 이용한다. 이때 이용되는 Exception Vector Table은 다음과 같은 구조를 가지고 있다.</p>
<p></p><blockquote class="transclude" data-url="../../ARM/Exceptions/Exception-Vector-Table" data-block><h1>Exception Vector Table</h1><h1 id="aarch64-exception-vector-table">AArch64 Exception Vector Table<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#aarch64-exception-vector-table" class="internal alias"> §</a></h1>
<h2 id="armv7-exception-vector-table">ARMv7 Exception Vector Table<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#armv7-exception-vector-table" class="internal alias"> §</a></h2>
<ul>
<li>Reference: <a href="https://www.realdigital.org/doc/fb6974fbe87554b433bc0c6df2f14d69" class="external">https://www.realdigital.org/doc/fb6974fbe87554b433bc0c6df2f14d69<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>


















































<div class="table-container"><table><thead><tr><th>Offset</th><th>Vector</th><th>Mode</th></tr></thead><tbody><tr><td>0x00</td><td>Reset</td><td>Supervisor</td></tr><tr><td>0x04</td><td>Undefined Instruction</td><td>Undefined</td></tr><tr><td>0x08</td><td>Supervisor Call</td><td>Supervisor</td></tr><tr><td>0x0C</td><td>Prefetch Abort</td><td>Abort</td></tr><tr><td>0x10</td><td>Data Abort</td><td>Abort</td></tr><tr><td>0x14</td><td>Not Used</td><td>NA</td></tr><tr><td>0x18</td><td>IRQ Interrupt</td><td>IRQ</td></tr><tr><td>0x1C</td><td>FIQ Interrupt</td><td>FIQ</td></tr></tbody></table></div>
<h2 id="armv8-exception-vector-table">ARMv8 Exception Vector Table<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#armv8-exception-vector-table" class="internal alias"> §</a></h2>
<ul>
<li>Reference: <a href="https://developer.arm.com/documentation/den0024/a/CHDEEDDC" class="external">https://developer.arm.com/documentation/den0024/a/CHDEEDDC<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>


























































































<div class="table-container"><table><thead><tr><th>Address</th><th>Exception Type</th><th>Description</th></tr></thead><tbody><tr><td>VBAR_ELn +0x000</td><td>Synchronous</td><td>Current EL with SP0</td></tr><tr><td>+0x080</td><td>IRQ/vIRQ</td><td>^</td></tr><tr><td>+0x100</td><td>FIQ/vFIQ</td><td>^</td></tr><tr><td>+0x180</td><td>SError/vSError</td><td>^</td></tr><tr><td>+0x200</td><td>Synchronous</td><td>Current EL with SPx</td></tr><tr><td>+0x280</td><td>IRQ/vIRQ</td><td>^</td></tr><tr><td>+0x300</td><td>FIQ/vFIQ</td><td>^</td></tr><tr><td>+0x380</td><td>SError/vSError</td><td>^</td></tr><tr><td>+0x400</td><td>Synchronous</td><td>Lower EL using AArch64</td></tr><tr><td>+0x480</td><td>IRQ/vIRQ</td><td>^</td></tr><tr><td>+0x500</td><td>FIQ/vFIQ</td><td>^</td></tr><tr><td>+0x580</td><td>SError/vSError</td><td>^</td></tr><tr><td>+0x600</td><td>Synchronous</td><td>Lower EL using AArch32</td></tr><tr><td>+0x680</td><td>IRQ/vIRQ</td><td>^</td></tr><tr><td>+0x700</td><td>FIQ/vFIQ</td><td>^</td></tr><tr><td>+0x780</td><td>SError/vSError</td><td>^</td></tr></tbody></table></div><a href="../../ARM/Exceptions/Exception-Vector-Table" class="internal">Link to original</a></blockquote><p></p>
<p>이와 같이 armv7의 exception vector와 armv8의 exception vector가 다른 구조로 구성되어 있다. cortex-a76 CPU에서 동작할 것을 상정하고 제작하기에, armv8의 exception vector table구조를 따랐다.</p>
<p>위의 Exception 이 들어왔을 때, 기존 프로그램의 실행 상태를 저장하고 handling을 처리하도록 하였으며, 여기에서 올바르지 않은 레지스터에 등록하였는지 오류가 발생하였지만 곧이내 해결할 수 있었다. Exception Vector Table의 각 field에서는 rust 코드로 branch하여 interrupt id를 확인하고 이에 맞는 핸들러를 불러와 수행하도록 하였다.</p>
<p>Exception Vector Table을 등록하기 위해서는 ARM의 VBAR 레지스터에 등록해야 하는데, 올바른 Exception Level의 VBAR 레지스터에 등록해야 해당 레벨에서의 익셉션을 처리할 수 있다. Exception의 종류는 다음과 같다.</p>
<p></p><blockquote class="transclude" data-url="../../ARM/Exceptions/Exception-Levels" data-block><h1>Exception Levels</h1><h1 id="exception-levels">Exception Levels<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#exception-levels" class="internal alias"> §</a></h1>
<p><img src="../../ARM/Exceptions/Exception-Levels/.././attachments/Pasted-image-20240426034408.png" width="300" height="auto"/></p>
<ul>
<li>EL3
<ul>
<li>Highest privilege level is typically used for so called <code>Secure Monitor</code></li>
<li>EL3 firmware typically implements the Power State Coordination Interface (PSCI) for the lower ELs to use</li>
<li>EL3 firmware typically involved into trusted boot</li>
</ul>
</li>
<li>EL2
<ul>
<li>Targets the virtualization use-case</li>
<li>EL at which hypervisors normally use for virtualization purposes.</li>
</ul>
</li>
<li>EL1
<ul>
<li>Privileged parts of the OS kernels use</li>
</ul>
</li>
<li>EL0
<ul>
<li>Most unprivileged level</li>
<li>Runs most unprivileged codes (userspace application, userspace drivers, etc).</li>
</ul>
</li>
</ul>
<h2 id="reference">Reference<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#reference" class="internal alias"> §</a></h2>
<ul>
<li><a href="https://developer.arm.com/documentation/102412/0103/Privilege-and-Exception-levels/Exception-levels" class="external">https://developer.arm.com/documentation/102412/0103/Privilege-and-Exception-levels/Exception-levels<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://krinkinmu.github.io/2021/01/04/aarch64-exception-levels.html" class="external">https://krinkinmu.github.io/2021/01/04/aarch64-exception-levels.html<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://medium.com/@om.nara/aarch64-exception-levels-60d3a74280e6" class="external">https://medium.com/@om.nara/aarch64-exception-levels-60d3a74280e6<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul><a href="../../ARM/Exceptions/Exception-Levels" class="internal">Link to original</a></blockquote><p></p>
<p>현재로써는 가상화를 생각하지 않고 커널의 권한만 필요하기에 EL1으로 부팅하였다. (부팅할 때에는 EL2로 부팅되지만, EL1으로 Transition하는 과정을 추가하였다.)</p>
<p>추가적으로, ARM에서는 GIC를 이용하여 Software Interrupt를 발생시키거나, Interrupt ID를 acknowledge한다. GIC를 사용하기 위해서 Device Tree에서 GICD, GICC의 주소를 읽어와 디바이스를 초기화시켜주었다.</p>
<h1 id="memory">Memory<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#memory" class="internal alias"> §</a></h1>
<p>QEMU에서는 ARM아키텍처를 에뮬레이션하기 위해서 virt라는 가상의 보드를 이용한다. Virt board의 메모리 레이아웃을 확인하기 위해서 qemu의 소스코드를 확인하여 본 결과 다음과 같은 레이아웃을 가지고 있었다.</p>



































































































































































































































<div class="table-container"><table><thead><tr><th>NAME</th><th>START_ADDR</th><th>END_ADDR</th><th>LEN</th></tr></thead><tbody><tr><td><strong>Boot Rom RESERVED (0 to 0x08000000)</strong></td><td>&lt;</td><td>&lt;</td><td>&lt;</td></tr><tr><td>VIRT_FLASH</td><td>0x00000000</td><td>0x08000000</td><td>0x08000000</td></tr><tr><td>VIRT_CPUPERIPHS</td><td>0x08000000</td><td>0x08020000</td><td>0x00020000</td></tr><tr><td><strong>GICD &amp; GICC sits inside CPU Peripheral space</strong></td><td>&lt;</td><td>&lt;</td><td>&lt;</td></tr><tr><td>VIRT_GIC_DIST</td><td>0x08000000</td><td>0x08010000</td><td>0x00010000</td></tr><tr><td>VIRT_GIC_CPU</td><td>0x08010000</td><td>0x08020000</td><td>0x00010000</td></tr><tr><td>VIRT_GIC_V2M</td><td>0x08020000</td><td>0x08021000</td><td>0x00001000</td></tr><tr><td>VIRT_GIC_HYP</td><td>0x08030000</td><td>0x08040000</td><td>0x00010000</td></tr><tr><td>VIRT_GIC_VCPU</td><td>0x08040000</td><td>0x08050000</td><td>0x00010000</td></tr><tr><td><strong>The space in between here is reserved for GICv3 CPU/vCPU/HYP</strong></td><td>&lt;</td><td>&lt;</td><td>&lt;</td></tr><tr><td>VIRT_GIC_ITS</td><td>0x08080000</td><td>0x080A0000</td><td>0x00020000</td></tr><tr><td><strong>This redistributor space allows up to 2<em>64kB</em>123 CPUs</strong></td><td>&lt;</td><td>&lt;</td><td>&lt;</td></tr><tr><td>VIRT_GIC_REDIST</td><td>0x080A0000</td><td>0x09000000</td><td>0x00F60000</td></tr><tr><td>VIRT_UART</td><td>0x09000000</td><td>0x09001000</td><td>0x00001000</td></tr><tr><td>VIRT_RTC</td><td>0x09010000</td><td>0x09011000</td><td>0x00001000</td></tr><tr><td>VIRT_FW_CFG</td><td>0x09020000</td><td>0x09020018</td><td>0x00000018</td></tr><tr><td>VIRT_GPIO</td><td>0x09030000</td><td>0x09031000</td><td>0x00001000</td></tr><tr><td>VIRT_SECURE_UART</td><td>0x09040000</td><td>0x09041000</td><td>0x00001000</td></tr><tr><td>VIRT_SMMU</td><td>0x09050000</td><td>0x09070000</td><td>0x00020000</td></tr><tr><td>VIRT_PCDIMM_ACPI</td><td>0x09070000</td><td>0x09070018</td><td>0x00000018</td></tr><tr><td>VIRT_ACPI_GED</td><td>0x09080000</td><td>0x09080004</td><td>0x00000004</td></tr><tr><td>VIRT_NVDIMM_ACPI</td><td>0x09090000</td><td>0x09090004</td><td>0x00000004</td></tr><tr><td>VIRT_PVTIME</td><td>0x090A0000</td><td>0x090B0000</td><td>0x00010000</td></tr><tr><td>VIRT_SECURE_GPIO</td><td>0x090B0000</td><td>0x090B1000</td><td>0x00001000</td></tr><tr><td>VIRT_MMIO</td><td>0x0A000000</td><td>0x0A000200</td><td>0x00000200</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>VIRT_PLATFORM_BUS</td><td>0x0C000000</td><td>0x0E000000</td><td>0x02000000</td></tr><tr><td>VIRT_SECURE_MEM</td><td>0x0E000000</td><td>0x01000000</td><td>0x01000000</td></tr><tr><td>VIRT_PCIE_MMIO</td><td>0x10000000</td><td>0x3EFF0000</td><td>0x2eff0000</td></tr><tr><td>VIRT_PCIE_PIO</td><td>0x3EFF0000</td><td>0x3F000000</td><td>0x00010000</td></tr><tr><td>VIRT_PCIE_ECAM</td><td>0x3F000000</td><td>0x40000000</td><td>0x01000000</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>VIRT_MEM</td><td>0x40000000</td><td>0x4040000000</td><td>0x4000000000</td></tr><tr><td><strong>Customizable Area</strong></td><td>&lt;</td><td>&lt;</td><td>&lt;</td></tr><tr><td>QEMU_DTB</td><td>0x40000000</td><td>0x40200000</td><td>0x00200000</td></tr><tr><td>COSMOS_RAM_START</td><td>0x40200000</td><td></td><td></td></tr></tbody></table></div>
<p>여기에서, 램의 시작 주소는 0x40000000 인데, 해당 위치에는 qemu가 dtb를 로드해 두었기 때문에, 여유있게 0x40200000부터 메모리 공간을 이용하도록 linker script를 구성하였다. 0x40200000부터의 섹션들은 다음과 같다.</p>













































<div class="table-container"><table><thead><tr><th>섹션</th><th>역할</th><th>권한</th></tr></thead><tbody><tr><td>.text</td><td>커널의 실행할 코드가 위치할 메모리 영역</td><td>r-x</td></tr><tr><td>.rodata</td><td>컴파일 시에 값이 정해지고 변경되지 않는 전역 상수 데이터</td><td>r—</td></tr><tr><td>.got</td><td>Relocation 관련.. 아직 사용하지 않음</td><td>r—</td></tr><tr><td>.data</td><td>컴파일 시에 값이 정해지는 전역 변수 데이터</td><td>rw-</td></tr><tr><td>.bss</td><td>컴파일 시에 초기값이 할당되지 않은 전역변수</td><td>rw-</td></tr><tr><td>Heap</td><td>동적으로 할당할 수 있는 메모리의 영역..아직 구현되지 않음</td><td></td></tr><tr><td>Stack</td><td>프로세스의 스택이 위치하는 메모리 영역</td><td></td></tr></tbody></table></div>
<p>아직 heap 영역에 대해서는 구현되지 않았으며, 스택 역시 주소공간만 충분히 할당해 주었다. 이는 Virtual Memory와 관련된 구현을 할 때 함께 진행할 계획이다.</p>
<h1 id="references">References<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#references" class="internal alias"> §</a></h1>
<p>Philipp Oppermann’s blog</p>
<p><a href="https://os.phil-opp.com/freestanding-rust-binary/" class="external">https://os.phil-opp.com/freestanding-rust-binary/<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>Running a full arm64 system stack under QEMU</p>
<p><a href="https://cdn.kernel.org/pub/linux/kernel/people/will/docs/qemu/qemu-arm64-howto.html" class="external">https://cdn.kernel.org/pub/linux/kernel/people/will/docs/qemu/qemu-arm64-howto.html<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>UEFI vs BIOS</p>
<p><a href="https://phoenixnap.com/kb/uefi-vs-bios" class="external">https://phoenixnap.com/kb/uefi-vs-bios<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p>Devicetree in QEMU</p>
<p><a href="https://docs.u-boot.org/en/latest/develop/devicetree/dt_qemu.html" class="external">https://docs.u-boot.org/en/latest/develop/devicetree/dt_qemu.html<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p>DeviceTree Specification</p>
<p><a href="https://devicetree-specification.readthedocs.io/en/stable/index.html" class="external">https://devicetree-specification.readthedocs.io/en/stable/index.html<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p>Flattened Device Tree Format</p>
<p><a href="https://devicetree-specification.readthedocs.io/en/v0.3/flattened-format.html" class="external">https://devicetree-specification.readthedocs.io/en/v0.3/flattened-format.html<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a><br/>
<a href="https://velog.io/@coral2cola/ARM-Interrupts-1" class="external">https://velog.io/@coral2cola/ARM-Interrupts-1<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p><a href="https://velog.io/@coral2cola/ARM-Interrupts-2" class="external">https://velog.io/@coral2cola/ARM-Interrupts-2<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p><a href="https://grasslab.github.io/osdi/en/labs/lab3.html" class="external">https://grasslab.github.io/osdi/en/labs/lab3.html<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p>Linux - ARM architected timer:</p>
<p><a href="https://kernel.org/doc/Documentation/devicetree/bindings/arm/arch_timer.txt" class="external">https://kernel.org/doc/Documentation/devicetree/bindings/arm/arch_timer.txt<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p>Linux - ARM Generic Interrupt Controller, version 3</p>
<p><a href="https://www.kernel.org/doc/Documentation/devicetree/bindings/interrupt-controller/arm%2Cgic-v3.txt" class="external">https://www.kernel.org/doc/Documentation/devicetree/bindings/interrupt-controller/arm%2Cgic-v3.txt<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p>Hermit Kernel: <a href="https://hermit-os.org/kernel" class="external">https://hermit-os.org/kernel<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>Hermit Loader: <a href="http://hermit-os.org/loader" class="external">http://hermit-os.org/loader<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p>rust-raspberrypi os tutorial: <a href="https://github.com/rust-embedded/rust-raspberrypi-OS-tutorials" class="external">https://github.com/rust-embedded/rust-raspberrypi-OS-tutorials<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> </p>
<p>ALIGN in Linker Scripts</p>
<p><a href="https://stackoverflow.com/questions/8458084/align-in-linker-scripts" class="external">https://stackoverflow.com/questions/8458084/align-in-linker-scripts<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>Linux Memory Layout</p>
<p><a href="https://hackyboiz.github.io/2022/01/14/poosic/linux-memory-layout/" class="external">https://hackyboiz.github.io/2022/01/14/poosic/linux-memory-layout/<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>QEMU</p>
<p><a href="https://github.com/qemu/qemu" class="external">https://github.com/qemu/qemu<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p></article></div><div class="right sidebar"><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#요약" data-for="요약">요약</a></li><li class="depth-0"><a href="#개요" data-for="개요">개요</a></li><li class="depth-0"><a href="#booting" data-for="booting">Booting</a></li><li class="depth-0"><a href="#interrupt" data-for="interrupt">Interrupt</a></li><li class="depth-0"><a href="#memory" data-for="memory">Memory</a></li><li class="depth-0"><a href="#references" data-for="references">References</a></li></ul></div></div><div class="graph desktop-only"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="backlinks desktop-only"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div><div class="explorer mobile-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;ARM&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Exceptions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Instructions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Registers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Registers/Program-Status-Registers-(PSR)&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Flutter&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Kernel-APIs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Kernel-Labs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Linux-Commands&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cookie&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)/Appendix&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)/Daily-Notes&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/OS-Assignments&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/WePlan&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;뒤죽박죽&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM"><a href="../../ARM" data-for="ARM" class="folder-title">ARM</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Exceptions"><a href="../../ARM/Exceptions" data-for="Exceptions" class="folder-title">Exceptions</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Exceptions"><li><a href="../../ARM/Exceptions/Exception-Handling-Registers" data-for="ARM/Exceptions/Exception-Handling-Registers">Exception Handling Registers</a></li><li><a href="../../ARM/Exceptions/Exception-Levels" data-for="ARM/Exceptions/Exception-Levels">Exception Levels</a></li><li><a href="../../ARM/Exceptions/Exception-Vector-Table" data-for="ARM/Exceptions/Exception-Vector-Table">Exception Vector Table</a></li><li><a href="../../ARM/Exceptions/Interrupt" data-for="ARM/Exceptions/Interrupt">Interrupt</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Instructions"><a href="../../ARM/Instructions" data-for="Instructions" class="folder-title">A-Profile A64 Instructions</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Instructions"><li><a href="../../ARM/Instructions/cmp" data-for="ARM/Instructions/cmp">cmp</a></li><li><a href="../../ARM/Instructions/DMB-DSB-ISB" data-for="ARM/Instructions/DMB-DSB-ISB">DMB DSB ISB</a></li><li><a href="../../ARM/Instructions/MRS-MSR" data-for="ARM/Instructions/MRS-MSR">MSR MSR</a></li><li><a href="../../ARM/Instructions/STP" data-for="ARM/Instructions/STP">STP</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Registers"><a href="../../ARM/Registers" data-for="Registers" class="folder-title">A-Profile Registers</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Registers"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Registers/Program-Status-Registers-(PSR)"><a href="../../ARM/Registers/Program-Status-Registers-(PSR)" data-for="Program-Status-Registers-(PSR)" class="folder-title">Program Status Registers</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Registers/Program-Status-Registers-(PSR)"><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/APSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/APSR">APSR</a></li><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/CPSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/CPSR">CPSR</a></li><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/SPSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/SPSR">SPSR</a></li></ul></div></li><li><a href="../../ARM/Registers/DAIF" data-for="ARM/Registers/DAIF">DAIF</a></li><li><a href="../../ARM/Registers/HCR_EL2" data-for="ARM/Registers/HCR_EL2">HCR_EL2</a></li><li><a href="../../ARM/Registers/SPSel" data-for="ARM/Registers/SPSel">SPSel</a></li><li><a href="../../ARM/Registers/VBAR_EL1" data-for="ARM/Registers/VBAR_EL1">VBAR_EL1</a></li></ul></div></li><li><a href="../../ARM/Learn-The-Architecture" data-for="ARM/Learn-The-Architecture">Learn The Architecture</a></li><li><a href="../../ARM/Processor-Modes" data-for="ARM/Processor-Modes">Processor Modes</a></li><li><a href="../../ARM/Timer" data-for="ARM/Timer">Timer</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Flutter"><a href="../../Flutter" data-for="Flutter" class="folder-title">Flutter</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Flutter"><li><a href="../../Flutter/Architecture" data-for="Flutter/Architecture">Architecture</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux"><a href="../../Linux" data-for="Linux" class="folder-title">Linux</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Kernel-APIs"><a href="../../Linux/Kernel-APIs" data-for="Kernel-APIs" class="folder-title">Kernel API</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Kernel-APIs"><li><a href="../../Linux/Kernel-APIs/kernel-↔-user" data-for="Linux/Kernel-APIs/kernel-↔-user">kernel ↔ user</a></li><li><a href="../../Linux/Kernel-APIs/mknod" data-for="Linux/Kernel-APIs/mknod">mknod</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Kernel-Labs"><a href="../../Linux/Kernel-Labs" data-for="Kernel-Labs" class="folder-title">Kernel Labs</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Kernel-Labs"><li><a href="../../Linux/Kernel-Labs/00_Introduction" data-for="Linux/Kernel-Labs/00_Introduction">Introduction</a></li><li><a href="../../Linux/Kernel-Labs/03_Character-Device-Drivers" data-for="Linux/Kernel-Labs/03_Character-Device-Drivers">Character Device Drivers</a></li><li><a href="../../Linux/Kernel-Labs/04_IO-access-and-Interrupts" data-for="Linux/Kernel-Labs/04_IO-access-and-Interrupts">I/O access and Interrupts</a></li><li><a href="../../Linux/Kernel-Labs/05_Deferred-Work" data-for="Linux/Kernel-Labs/05_Deferred-Work">Deferred Work</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Linux-Commands"><a href="../../Linux/Linux-Commands" data-for="Linux-Commands" class="folder-title">Linux Commands</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Linux-Commands"><li><a href="../../Linux/Linux-Commands/Linux-BIOS" data-for="Linux/Linux-Commands/Linux-BIOS">Linux BIOS</a></li><li><a href="../../Linux/Linux-Commands/rsync" data-for="Linux/Linux-Commands/rsync">rsync</a></li><li><a href="../../Linux/Linux-Commands/Upgrade-Debian" data-for="Linux/Linux-Commands/Upgrade-Debian">Upgrade Debian</a></li></ul></div></li><li><a href="../../Linux/ELF" data-for="Linux/ELF">ELF</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects"><a href="../../Projects" data-for="Projects" class="folder-title">Projects</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cookie"><a href="../../Projects/Cookie" data-for="Cookie" class="folder-title">Cookie</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cookie"><li><a href="../../Projects/Cookie/0314_아이디어발표" data-for="Projects/Cookie/0314_아이디어발표">3/14 아이디어 발표</a></li><li><a href="../../Projects/Cookie/0328_발표" data-for="Projects/Cookie/0328_발표">3/28 5주차 발표</a></li><li><a href="../../Projects/Cookie/0411_발표" data-for="Projects/Cookie/0411_발표">4/11 7주차 발표</a></li><li><a href="../../Projects/Cookie/0425_발표" data-for="Projects/Cookie/0425_발표">4/25 9주차 발표</a></li><li><a href="../../Projects/Cookie/0509_발표" data-for="Projects/Cookie/0509_발표">5/9 13주차 발표</a></li><li><a href="../../Projects/Cookie/0523_발표" data-for="Projects/Cookie/0523_발표">5/23 15주차 발표</a></li><li><a href="../../Projects/Cookie/0613_발표" data-for="Projects/Cookie/0613_발표">6/13 18주차 발표</a></li><li><a href="../../Projects/Cookie/0620_최종발표" data-for="Projects/Cookie/0620_최종발표">6/20 1학기 최종발표</a></li><li><a href="../../Projects/Cookie/0911_소개발표" data-for="Projects/Cookie/0911_소개발표">9/11 2학기 소개발표</a></li><li><a href="../../Projects/Cookie/0925_발표" data-for="Projects/Cookie/0925_발표">9/25 4주차 발표</a></li><li><a href="../../Projects/Cookie/1023_발표" data-for="Projects/Cookie/1023_발표">10/23 8주차 발표</a></li><li><a href="../../Projects/Cookie/1106_발표" data-for="Projects/Cookie/1106_발표">11/6 10주차 발표</a></li><li><a href="../../Projects/Cookie/1120_발표" data-for="Projects/Cookie/1120_발표">11/20 12주차 발표</a></li><li><a href="../../Projects/Cookie/1211_발표" data-for="Projects/Cookie/1211_발표">12/11 14주차 발표</a></li><li><a href="../../Projects/Cookie/1218_최종발표" data-for="Projects/Cookie/1218_최종발표">12/18 2학기 최종발표</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)"><a href="../../Projects/Cosmos-(ongoing)" data-for="Cosmos-(ongoing)" class="folder-title">Cosmos (ongoing)</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)/Appendix"><a href="../../Projects/Cosmos-(ongoing)/Appendix" data-for="Appendix" class="folder-title">Appendix</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)/Appendix"><li><a href="../../Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map" data-for="Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map">Virt Board Memory Map</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)/Daily-Notes"><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes" data-for="Daily-Notes" class="folder-title">Daily Notes</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)/Daily-Notes"><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28">2024-03-28</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29">2024-03-29</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-01" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-01">2024-04-01</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-03" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-03">2024-04-03</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-08" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-08">2024-04-08</a></li></ul></div></li><li><a href="../../Projects/Cosmos-(ongoing)/00_Mid-Report" data-for="Projects/Cosmos-(ongoing)/00_Mid-Report">cosmos 중간보고서</a></li><li><a href="../../Projects/Cosmos-(ongoing)/01_Intro" data-for="Projects/Cosmos-(ongoing)/01_Intro">Introduction</a></li><li><a href="../../Projects/Cosmos-(ongoing)/02_QEMU" data-for="Projects/Cosmos-(ongoing)/02_QEMU">QEMU 세팅</a></li><li><a href="../../Projects/Cosmos-(ongoing)/03_Booting" data-for="Projects/Cosmos-(ongoing)/03_Booting">Booting</a></li><li><a href="../../Projects/Cosmos-(ongoing)/04_Device-Tree" data-for="Projects/Cosmos-(ongoing)/04_Device-Tree">Device Tree</a></li><li><a href="../../Projects/Cosmos-(ongoing)/05_Bootloading" data-for="Projects/Cosmos-(ongoing)/05_Bootloading">Boot Loading</a></li><li><a href="../../Projects/Cosmos-(ongoing)/06_Interrupt-Handling-01" data-for="Projects/Cosmos-(ongoing)/06_Interrupt-Handling-01">Interrupt Handling 01</a></li><li><a href="../../Projects/Cosmos-(ongoing)/07_Interrupt-Handling-02" data-for="Projects/Cosmos-(ongoing)/07_Interrupt-Handling-02">Interrupt Handling 02</a></li><li><a href="../../Projects/Cosmos-(ongoing)/08_Interrupt-Handling-03" data-for="Projects/Cosmos-(ongoing)/08_Interrupt-Handling-03">Interrupt Handling 02</a></li><li><a href="../../Projects/Cosmos-(ongoing)/09_Memory-Layout" data-for="Projects/Cosmos-(ongoing)/09_Memory-Layout">Memory Layout</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/OS-Assignments"><a href="../../Projects/OS-Assignments" data-for="OS-Assignments" class="folder-title">OS Assignments</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/OS-Assignments"><li><a href="../../Projects/OS-Assignments/pa0" data-for="Projects/OS-Assignments/pa0">PA0: Warming up C programming</a></li><li><a href="../../Projects/OS-Assignments/pa1" data-for="Projects/OS-Assignments/pa1">PA1: My Amazing Shell</a></li><li><a href="../../Projects/OS-Assignments/pa2" data-for="Projects/OS-Assignments/pa2">PA2: Simulating Process Schedulers</a></li><li><a href="../../Projects/OS-Assignments/pa3" data-for="Projects/OS-Assignments/pa3">PA3: Virtual Memory Simulator</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/WePlan"><a href="../../Projects/WePlan" data-for="WePlan" class="folder-title">WePlan - 공동공간 예약 서비스</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/WePlan"><li><a href="../../Projects/WePlan/01_Project-Proposal" data-for="Projects/WePlan/01_Project-Proposal">Project Proposal</a></li><li><a href="../../Projects/WePlan/02_Requirements-Specification" data-for="Projects/WePlan/02_Requirements-Specification">Requirements Specification</a></li><li><a href="../../Projects/WePlan/03_Design-Document" data-for="Projects/WePlan/03_Design-Document">Design Document</a></li><li><a href="../../Projects/WePlan/04_Final-Project-Report" data-for="Projects/WePlan/04_Final-Project-Report">Final Project Report</a></li></ul></div></li><li><a href="../../Projects/Doge_Driver" data-for="Projects/Doge_Driver">Doge Driver</a></li><li><a href="../../Projects/Elevator-Controller" data-for="Projects/Elevator-Controller">엘레베이터 컨트롤러</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="뒤죽박죽"><a href="../../뒤죽박죽" data-for="뒤죽박죽" class="folder-title">🤪 뒤죽박죽</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="뒤죽박죽"><li><a href="../../뒤죽박죽/2024-02-네트워크-삽질" data-for="뒤죽박죽/2024-02-네트워크-삽질">2024-02 네트워크 삽질</a></li><li><a href="../../뒤죽박죽/Github-Actions" data-for="뒤죽박죽/Github-Actions">Github Actions 으로 obsidian-quartz 블로그 퍼블리시</a></li><li><a href="../../뒤죽박죽/OpenCV-on-mac" data-for="뒤죽박죽/OpenCV-on-mac">[OpenCV] Xcode OpenCV 설치 및 세팅</a></li><li><a href="../../뒤죽박죽/Rosetta+Conda-Env-Setting" data-for="뒤죽박죽/Rosetta+Conda-Env-Setting">[Conda] Rosetta + Conda Env 세팅</a></li><li><a href="../../뒤죽박죽/Rosetta+Conda-ROS-Setting" data-for="뒤죽박죽/Rosetta+Conda-ROS-Setting">[ROS] Rosetta + Conda로 ROS 세팅</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.1.5</a>, © 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></body><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="../../postscript.js" type="module"></script></html>