<!DOCTYPE html>
<html><head><title>PA3: Virtual Memory Simulator</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="PA3: Virtual Memory Simulator"/><meta property="og:description" content="https://github.com/parkjbdev/SCE213_OS/tree/os-pa3 Abstract Â§ ì´ë²ˆ ê³¼ì œëŠ” virtual memory simulatorë¡œ, í”„ë¡œì„¸ìŠ¤ê°€ ì½ì„ ìˆ˜ ìˆëŠ” logical address (í˜¹ì€ virtual address) ë¥¼ physical addressë¡œ ë³€í™˜í•´ì£¼ëŠ” MMUì˜ ì—­í•  ì¤‘ ì¼ë¶€ë¥¼ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ë‹¤."/><meta property="og:image" content="https://tech.parkjb.com/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="https://github.com/parkjbdev/SCE213_OS/tree/os-pa3 Abstract Â§ ì´ë²ˆ ê³¼ì œëŠ” virtual memory simulatorë¡œ, í”„ë¡œì„¸ìŠ¤ê°€ ì½ì„ ìˆ˜ ìˆëŠ” logical address (í˜¹ì€ virtual address) ë¥¼ physical addressë¡œ ë³€í™˜í•´ì£¼ëŠ” MMUì˜ ì—­í•  ì¤‘ ì¼ë¶€ë¥¼ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ë‹¤."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../../static/contentIndex.json").then(data => data.json())</script></head><div>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8XEDCYQX45"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8XEDCYQX45');
</script>
</div><body data-slug="Projects/OS-Assignments/pa3"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title "><a href="../..">ğŸª´ PARKJB TECH</a></h1><div class="spacer mobile-only"></div><div class="darkmode "><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="search "><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;ARM&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Exceptions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Instructions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Registers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Registers/Program-Status-Registers-(PSR)&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Flutter&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Kernel-APIs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Kernel-Labs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Linux-Commands&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cookie&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)/Appendix&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)/Daily-Notes&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/OS-Assignments&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/WePlan&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ë’¤ì£½ë°•ì£½&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM"><a href="../../ARM" data-for="ARM" class="folder-title">ARM</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Exceptions"><a href="../../ARM/Exceptions" data-for="Exceptions" class="folder-title">Exceptions</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Exceptions"><li><a href="../../ARM/Exceptions/Exception-Handling-Registers" data-for="ARM/Exceptions/Exception-Handling-Registers">Exception Handling Registers</a></li><li><a href="../../ARM/Exceptions/Exception-Levels" data-for="ARM/Exceptions/Exception-Levels">Exception Levels</a></li><li><a href="../../ARM/Exceptions/Exception-Vector-Table" data-for="ARM/Exceptions/Exception-Vector-Table">Exception Vector Table</a></li><li><a href="../../ARM/Exceptions/Interrupt" data-for="ARM/Exceptions/Interrupt">Interrupt</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Instructions"><a href="../../ARM/Instructions" data-for="Instructions" class="folder-title">A-Profile A64 Instructions</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Instructions"><li><a href="../../ARM/Instructions/cmp" data-for="ARM/Instructions/cmp">cmp</a></li><li><a href="../../ARM/Instructions/DMB-DSB-ISB" data-for="ARM/Instructions/DMB-DSB-ISB">DMB DSB ISB</a></li><li><a href="../../ARM/Instructions/MRS-MSR" data-for="ARM/Instructions/MRS-MSR">MSR MSR</a></li><li><a href="../../ARM/Instructions/STP" data-for="ARM/Instructions/STP">STP</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Registers"><a href="../../ARM/Registers" data-for="Registers" class="folder-title">A-Profile Registers</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Registers"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Registers/Program-Status-Registers-(PSR)"><a href="../../ARM/Registers/Program-Status-Registers-(PSR)" data-for="Program-Status-Registers-(PSR)" class="folder-title">Program Status Registers</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Registers/Program-Status-Registers-(PSR)"><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/APSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/APSR">APSR</a></li><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/CPSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/CPSR">CPSR</a></li><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/SPSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/SPSR">SPSR</a></li></ul></div></li><li><a href="../../ARM/Registers/DAIF" data-for="ARM/Registers/DAIF">DAIF</a></li><li><a href="../../ARM/Registers/HCR_EL2" data-for="ARM/Registers/HCR_EL2">HCR_EL2</a></li><li><a href="../../ARM/Registers/SPSel" data-for="ARM/Registers/SPSel">SPSel</a></li><li><a href="../../ARM/Registers/VBAR_EL1" data-for="ARM/Registers/VBAR_EL1">VBAR_EL1</a></li></ul></div></li><li><a href="../../ARM/Learn-The-Architecture" data-for="ARM/Learn-The-Architecture">Learn The Architecture</a></li><li><a href="../../ARM/Processor-Modes" data-for="ARM/Processor-Modes">Processor Modes</a></li><li><a href="../../ARM/Timer" data-for="ARM/Timer">Timer</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Flutter"><a href="../../Flutter" data-for="Flutter" class="folder-title">Flutter</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Flutter"><li><a href="../../Flutter/Architecture" data-for="Flutter/Architecture">Architecture</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux"><a href="../../Linux" data-for="Linux" class="folder-title">Linux</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Kernel-APIs"><a href="../../Linux/Kernel-APIs" data-for="Kernel-APIs" class="folder-title">Kernel API</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Kernel-APIs"><li><a href="../../Linux/Kernel-APIs/kernel-â†”-user" data-for="Linux/Kernel-APIs/kernel-â†”-user">kernel â†” user</a></li><li><a href="../../Linux/Kernel-APIs/mknod" data-for="Linux/Kernel-APIs/mknod">mknod</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Kernel-Labs"><a href="../../Linux/Kernel-Labs" data-for="Kernel-Labs" class="folder-title">Kernel Labs</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Kernel-Labs"><li><a href="../../Linux/Kernel-Labs/00_Introduction" data-for="Linux/Kernel-Labs/00_Introduction">Introduction</a></li><li><a href="../../Linux/Kernel-Labs/03_Character-Device-Drivers" data-for="Linux/Kernel-Labs/03_Character-Device-Drivers">Character Device Drivers</a></li><li><a href="../../Linux/Kernel-Labs/04_IO-access-and-Interrupts" data-for="Linux/Kernel-Labs/04_IO-access-and-Interrupts">I/O access and Interrupts</a></li><li><a href="../../Linux/Kernel-Labs/05_Deferred-Work" data-for="Linux/Kernel-Labs/05_Deferred-Work">Deferred Work</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Linux-Commands"><a href="../../Linux/Linux-Commands" data-for="Linux-Commands" class="folder-title">Linux Commands</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Linux-Commands"><li><a href="../../Linux/Linux-Commands/Linux-BIOS" data-for="Linux/Linux-Commands/Linux-BIOS">Linux BIOS</a></li><li><a href="../../Linux/Linux-Commands/rsync" data-for="Linux/Linux-Commands/rsync">rsync</a></li><li><a href="../../Linux/Linux-Commands/Upgrade-Debian" data-for="Linux/Linux-Commands/Upgrade-Debian">Upgrade Debian</a></li></ul></div></li><li><a href="../../Linux/ELF" data-for="Linux/ELF">ELF</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects"><a href="../../Projects" data-for="Projects" class="folder-title">Projects</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cookie"><a href="../../Projects/Cookie" data-for="Cookie" class="folder-title">Cookie</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cookie"><li><a href="../../Projects/Cookie/0314_ì•„ì´ë””ì–´ë°œí‘œ" data-for="Projects/Cookie/0314_ì•„ì´ë””ì–´ë°œí‘œ">3/14 ì•„ì´ë””ì–´ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0328_ë°œí‘œ" data-for="Projects/Cookie/0328_ë°œí‘œ">3/28 5ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0411_ë°œí‘œ" data-for="Projects/Cookie/0411_ë°œí‘œ">4/11 7ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0425_ë°œí‘œ" data-for="Projects/Cookie/0425_ë°œí‘œ">4/25 9ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0509_ë°œí‘œ" data-for="Projects/Cookie/0509_ë°œí‘œ">5/9 13ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0523_ë°œí‘œ" data-for="Projects/Cookie/0523_ë°œí‘œ">5/23 15ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0613_ë°œí‘œ" data-for="Projects/Cookie/0613_ë°œí‘œ">6/13 18ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0620_ìµœì¢…ë°œí‘œ" data-for="Projects/Cookie/0620_ìµœì¢…ë°œí‘œ">6/20 1í•™ê¸° ìµœì¢…ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0911_ì†Œê°œë°œí‘œ" data-for="Projects/Cookie/0911_ì†Œê°œë°œí‘œ">9/11 2í•™ê¸° ì†Œê°œë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0925_ë°œí‘œ" data-for="Projects/Cookie/0925_ë°œí‘œ">9/25 4ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1023_ë°œí‘œ" data-for="Projects/Cookie/1023_ë°œí‘œ">10/23 8ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1106_ë°œí‘œ" data-for="Projects/Cookie/1106_ë°œí‘œ">11/6 10ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1120_ë°œí‘œ" data-for="Projects/Cookie/1120_ë°œí‘œ">11/20 12ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1211_ë°œí‘œ" data-for="Projects/Cookie/1211_ë°œí‘œ">12/11 14ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1218_ìµœì¢…ë°œí‘œ" data-for="Projects/Cookie/1218_ìµœì¢…ë°œí‘œ">12/18 2í•™ê¸° ìµœì¢…ë°œí‘œ</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)"><a href="../../Projects/Cosmos-(ongoing)" data-for="Cosmos-(ongoing)" class="folder-title">Cosmos (ongoing)</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)/Appendix"><a href="../../Projects/Cosmos-(ongoing)/Appendix" data-for="Appendix" class="folder-title">Appendix</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)/Appendix"><li><a href="../../Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map" data-for="Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map">Virt Board Memory Map</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)/Daily-Notes"><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes" data-for="Daily-Notes" class="folder-title">Daily Notes</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)/Daily-Notes"><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28">2024-03-28</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29">2024-03-29</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-01" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-01">2024-04-01</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-03" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-03">2024-04-03</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-08" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-08">2024-04-08</a></li></ul></div></li><li><a href="../../Projects/Cosmos-(ongoing)/00_Mid-Report" data-for="Projects/Cosmos-(ongoing)/00_Mid-Report">cosmos ì¤‘ê°„ë³´ê³ ì„œ</a></li><li><a href="../../Projects/Cosmos-(ongoing)/01_Intro" data-for="Projects/Cosmos-(ongoing)/01_Intro">Introduction</a></li><li><a href="../../Projects/Cosmos-(ongoing)/02_QEMU" data-for="Projects/Cosmos-(ongoing)/02_QEMU">QEMU ì„¸íŒ…</a></li><li><a href="../../Projects/Cosmos-(ongoing)/03_Booting" data-for="Projects/Cosmos-(ongoing)/03_Booting">Booting</a></li><li><a href="../../Projects/Cosmos-(ongoing)/04_Device-Tree" data-for="Projects/Cosmos-(ongoing)/04_Device-Tree">Device Tree</a></li><li><a href="../../Projects/Cosmos-(ongoing)/05_Bootloading" data-for="Projects/Cosmos-(ongoing)/05_Bootloading">Boot Loading</a></li><li><a href="../../Projects/Cosmos-(ongoing)/06_Interrupt-Handling-01" data-for="Projects/Cosmos-(ongoing)/06_Interrupt-Handling-01">Interrupt Handling 01</a></li><li><a href="../../Projects/Cosmos-(ongoing)/07_Interrupt-Handling-02" data-for="Projects/Cosmos-(ongoing)/07_Interrupt-Handling-02">Interrupt Handling 02</a></li><li><a href="../../Projects/Cosmos-(ongoing)/08_Interrupt-Handling-03" data-for="Projects/Cosmos-(ongoing)/08_Interrupt-Handling-03">Interrupt Handling 02</a></li><li><a href="../../Projects/Cosmos-(ongoing)/09_Memory-Layout" data-for="Projects/Cosmos-(ongoing)/09_Memory-Layout">Memory Layout</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/OS-Assignments"><a href="../../Projects/OS-Assignments" data-for="OS-Assignments" class="folder-title">OS Assignments</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/OS-Assignments"><li><a href="../../Projects/OS-Assignments/pa0" data-for="Projects/OS-Assignments/pa0">PA0: Warming up C programming</a></li><li><a href="../../Projects/OS-Assignments/pa1" data-for="Projects/OS-Assignments/pa1">PA1: My Amazing Shell</a></li><li><a href="../../Projects/OS-Assignments/pa2" data-for="Projects/OS-Assignments/pa2">PA2: Simulating Process Schedulers</a></li><li><a href="../../Projects/OS-Assignments/pa3" data-for="Projects/OS-Assignments/pa3">PA3: Virtual Memory Simulator</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/WePlan"><a href="../../Projects/WePlan" data-for="WePlan" class="folder-title">WePlan - ê³µë™ê³µê°„ ì˜ˆì•½ ì„œë¹„ìŠ¤</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/WePlan"><li><a href="../../Projects/WePlan/01_Project-Proposal" data-for="Projects/WePlan/01_Project-Proposal">Project Proposal</a></li><li><a href="../../Projects/WePlan/02_Requirements-Specification" data-for="Projects/WePlan/02_Requirements-Specification">Requirements Specification</a></li><li><a href="../../Projects/WePlan/03_Design-Document" data-for="Projects/WePlan/03_Design-Document">Design Document</a></li><li><a href="../../Projects/WePlan/04_Final-Project-Report" data-for="Projects/WePlan/04_Final-Project-Report">Final Project Report</a></li></ul></div></li><li><a href="../../Projects/Doge_Driver" data-for="Projects/Doge_Driver">Doge Driver</a></li><li><a href="../../Projects/Elevator-Controller" data-for="Projects/Elevator-Controller">ì—˜ë ˆë² ì´í„° ì»¨íŠ¸ë¡¤ëŸ¬</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ë’¤ì£½ë°•ì£½"><a href="../../ë’¤ì£½ë°•ì£½" data-for="ë’¤ì£½ë°•ì£½" class="folder-title">ğŸ¤ª ë’¤ì£½ë°•ì£½</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ë’¤ì£½ë°•ì£½"><li><a href="../../ë’¤ì£½ë°•ì£½/2024-02-ë„¤íŠ¸ì›Œí¬-ì‚½ì§ˆ" data-for="ë’¤ì£½ë°•ì£½/2024-02-ë„¤íŠ¸ì›Œí¬-ì‚½ì§ˆ">2024-02 ë„¤íŠ¸ì›Œí¬ ì‚½ì§ˆ</a></li><li><a href="../../ë’¤ì£½ë°•ì£½/Github-Actions" data-for="ë’¤ì£½ë°•ì£½/Github-Actions">Github Actions ìœ¼ë¡œ obsidian-quartz ë¸”ë¡œê·¸ í¼ë¸”ë¦¬ì‹œ</a></li><li><a href="../../ë’¤ì£½ë°•ì£½/OpenCV-on-mac" data-for="ë’¤ì£½ë°•ì£½/OpenCV-on-mac">[OpenCV] Xcode OpenCV ì„¤ì¹˜ ë° ì„¸íŒ…</a></li><li><a href="../../ë’¤ì£½ë°•ì£½/Rosetta+Conda-Env-Setting" data-for="ë’¤ì£½ë°•ì£½/Rosetta+Conda-Env-Setting">[Conda] Rosetta + Conda Env ì„¸íŒ…</a></li><li><a href="../../ë’¤ì£½ë°•ì£½/Rosetta+Conda-ROS-Setting" data-for="ë’¤ì£½ë°•ì£½/Rosetta+Conda-ROS-Setting">[ROS] Rosetta + Condaë¡œ ROS ì„¸íŒ…</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div><div class="recent-notes desktop-only"><h3>Recent Notes</h3><ul class="recent-ul"><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../../Projects/Cosmos-(ongoing)/" class="internal">index</a></h3></div><p class="meta">May 03, 2024</p><ul class="tags"></ul></div></li><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../../Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map" class="internal">Virt Board Memory Map</a></h3></div><p class="meta">May 03, 2024</p><ul class="tags"></ul></div></li><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28" class="internal">2024-03-28</a></h3></div><p class="meta">May 03, 2024</p><ul class="tags"></ul></div></li></ul></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container " aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../">Home</a><p> â¯ </p></div><div class="breadcrumb-element"><a href="../../Projects/">Projects</a><p> â¯ </p></div><div class="breadcrumb-element"><a href="../../Projects/OS-Assignments/">OS Assignments</a><p> â¯ </p></div><div class="breadcrumb-element"><a href>PA3: Virtual Memory Simulator</a></div></nav><h1 class="article-title ">PA3: Virtual Memory Simulator</h1><p class="content-meta ">Jun 02, 2023, 24 min read</p><ul class="tags "><li><a href="../../tags/os" class="internal tag-link">#os</a></li><li><a href="../../tags/assignment" class="internal tag-link">#assignment</a></li><li><a href="../../tags/C" class="internal tag-link">#C</a></li></ul><div class="toc mobile-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#abstract" data-for="abstract">Abstract</a></li><li class="depth-0"><a href="#page-allocation" data-for="page-allocation">Page Allocation</a></li><li class="depth-1"><a href="#commit-2b08f40-implement-alloc_page-and-free_page" data-for="commit-2b08f40-implement-alloc_page-and-free_page">commit 2b08f40: Implement alloc_page and free_page</a></li><li class="depth-1"><a href="#commit-88c1a07-implement-handle_page_fault" data-for="commit-88c1a07-implement-handle_page_fault">commit 88c1a07: implement: handle_page_fault</a></li><li class="depth-0"><a href="#page-deallocation" data-for="page-deallocation">Page Deallocation</a></li><li class="depth-1"><a href="#commit-2b08f403-implement-alloc_page-and-free_page" data-for="commit-2b08f403-implement-alloc_page-and-free_page">commit 2b08f403: Implement alloc_page and free_page</a></li><li class="depth-0"><a href="#fork" data-for="fork">Fork</a></li><li class="depth-0"><a href="#copy-on-write" data-for="copy-on-write">Copy on Write</a></li><li class="depth-1"><a href="#testcase-testcasescow-2" data-for="testcase-testcasescow-2">Testcase: testcases/cow-2</a></li><li class="depth-0"><a href="#tlb" data-for="tlb">TLB</a></li><li class="depth-0"><a href="#commit-f7f01b80-cleanup--add-comments" data-for="commit-f7f01b80-cleanup--add-comments">commit f7f01b80: cleanup &amp; add comments</a></li><li class="depth-0"><a href="#lessons-learned" data-for="lessons-learned">Lessons Learned</a></li></ul></div></div></div></div><article class="popover-hint"><p><a href="https://github.com/parkjbdev/SCE213_OS/tree/os-pa3" class="external">https://github.com/parkjbdev/SCE213_OS/tree/os-pa3<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<h2 id="abstract">Abstract<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#abstract" class="internal alias"> Â§</a></h2>
<p>ì´ë²ˆ ê³¼ì œëŠ” virtual memory simulatorë¡œ, í”„ë¡œì„¸ìŠ¤ê°€ ì½ì„ ìˆ˜ ìˆëŠ” logical address (í˜¹ì€ virtual address) ë¥¼ physical addressë¡œ ë³€í™˜í•´ì£¼ëŠ” MMUì˜ ì—­í•  ì¤‘ ì¼ë¶€ë¥¼ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ë‹¤.</p>
<p>Logical addressëŠ” Virtual Page Number (í˜¹ì€ VPN)ì™€ Offsetìœ¼ë¡œ ë‚˜ë‰˜ê³ , MMUê°€ Page Tableì„ ì°¸ì¡°í•˜ì—¬ VPNì„ Page Frame Number (í˜¹ì€ PFN)ë¡œ ë°”ê¾¸ë©´ ì‹¤ì œ Pageê°€ ì €ì¥ë˜ì–´ ìˆëŠ” Physical Addressë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ìˆë‹¤.</p>
<p>ì´ë²ˆ ê³¼ì œì—ì„œëŠ” 2 level hierachical page tableì„ ì‚¬ìš©í•˜ë©°, page tableì„ ê°€ë¦¬í‚¤ëŠ” outer page tableê°€ ì •ì˜ë˜ì–´ìˆë‹¤.
ì¦‰, VPNì„ ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê°ê° outer page tableì˜ index ì™€ page tableì˜ indexë¥¼ ì•Œì•„ë‚´ì–´ VPNì— í•´ë‹¹í•˜ëŠ” PTE (Page Table Entry)ë¥¼ ì°¾ì•„ PFNì„ ì•Œì•„ë‚¼ ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>
<h2 id="page-allocation">Page Allocation<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#page-allocation" class="internal alias"> Â§</a></h2>
<p>ì£¼ì–´ì§„ <code>vpn</code>ì— ëŒ€í•´ì„œ ìƒˆë¡œìš´ pageë¥¼ í• ë‹¹í•˜ëŠ” ê³¼ì •ì´ë‹¤.</p>
<p>ì´ˆê¸° êµ¬í˜„ê³¼ì •ì—ì„œ ê³¼ì œì˜ specificationì— ëŒ€í•´ í˜¼ë™ì´ ìˆì–´, <code>vpn</code>ì„ <code>pfn</code>ìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ” ê²ƒì´ ì•„ë‹Œ, offsetì´ í¬í•¨ëœ ì „ì²´ virtual addressë¥¼ pfnê³¼ offsetì´ í•©í•´ì§„ physical addressë¡œ ë°”ê¾¸ì–´ ì£¼ëŠ” ì ˆì°¨ë¡œ ìƒê°í•˜ì˜€ìœ¼ë‚˜, virtual page numberì˜ ì •ì˜ì— ëŒ€í•´ì„œ ë‹¤ì‹œ ìƒê°í•´ë³¸ ê²°ê³¼, virtual addressì˜ offsetì€ ê³ ë ¤í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ì‚¬í•­ì„ì„ í™•ì¸í•˜ì˜€ë‹¤.</p>
<h3 id="commit-2b08f40-implement-alloc_page-and-free_page">commit 2b08f40: Implement <code>alloc_page</code> and <code>free_page</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#commit-2b08f40-implement-alloc_page-and-free_page" class="internal alias"> Â§</a></h3>
<p>allocation ì„ ì§„í–‰í•  ë•Œ, ì£¼ì–´ì§„ <code>vpn</code>ì— ëŒ€í•´ í•´ë‹¹í•˜ëŠ” <code>pd_index</code>ì™€ <code>pte_index</code>ë¥¼ ì°¾ì•„ í•´ë‹¹í•˜ëŠ” page table entryì— ì ‘ê·¼í•´ì•¼ í•œë‹¤.
ì´ë¥¼ ìœ„í•´ì„œ, ì²˜ìŒì—ëŠ” ë¹„íŠ¸ ì´ë™ ì—°ì‚°ì <code>>></code> ì™€ <code>&lt;&lt;</code>ì„ ì´ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì—°ì‚°í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤í•˜ì˜€ë‹¤.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="c" data-theme="github-dark github-light"><code data-language="c" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">pd_index </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> vpn </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">>></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> PTES_PER_PAGE_SHIFT;</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">pte_index </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> vpn </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">&lt;&lt;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">32</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> -</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> PTES_PER_PAGE_SHIFT) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">>></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">32</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> -</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> PTES_PER_PAGE_SHIFT);</span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"> // unsigned int uses 32bits</span></span></code></pre></figure>
<p>ì—¬ê¸°ì—ì„œ ê³ ë ¤í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” offsetê¹Œì§€ ê³ ë ¤í•˜ë ¤ê³  í•˜ëŠ” ë°”ëŒì— (ì‚¬ì‹¤ offset bitì´ ëª‡ bitì„ ì°¨ì§€í•˜ëŠ”ì§€ ì•Œ ìˆ˜ë„ ì—†ë‹¤.) ë¹„íŠ¸ì—°ì‚°ìë¡œ ê³„ì‚°ì´ ë³µì¡í•´ì§€ê³ , ì˜¬ë°”ë¥¸ ë°©ë²•ì¸ì§€ ì˜ì‹¬í•˜ë˜ì¤‘, <code>vm.c</code>ì˜ <code>__translate</code> í•¨ìˆ˜ì—ì„œ vpnì„ <code>NR_PTES_PER_PAGE</code>ë¡œ ë‚˜ëˆˆê°’ê³¼ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ì˜ ê°’ìœ¼ë¡œ indexë¥¼ ì•Œì•„ë‚´ëŠ” ê²ƒì„ í™•ì¸í›„ì—, ì˜¬ë°”ë¥´ê²Œ ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.
ìœ„ì˜ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ <code>pd_index</code>ì™€ <code>pte_index</code>ë¥¼ ì•Œì•„ë‚¸ ì´í›„, <code>pte_directory</code>ê°€ <code>NULL</code>ë¡œ ì„ ì–¸ë˜ì§€ ì•Šì€ ìƒí™©ì¼ ë•Œ, ë™ì ìœ¼ë¡œ í• ë‹¹í•´ì¤€ ë’¤ì— ì˜¬ë°”ë¥¸ page table entryë“¤ì˜ ê°’ì„ í• ë‹¹í•´ì£¼ë©° ì´ˆê¸°í™”í•´ì£¼ì—ˆë‹¤.</p>
<h3 id="commit-88c1a07-implement-handle_page_fault">commit 88c1a07: implement: <code>handle_page_fault</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#commit-88c1a07-implement-handle_page_fault" class="internal alias"> Â§</a></h3>
<p>read only pageì— writeë¥¼ ì‹œë„í•  ê²½ìš°, page faultê°€ ë°œìƒí•˜ì—¬ page fault handlerê°€ ë™ì‘í•œë‹¤.
ì´ëŸ¬í•œ ìƒí™©ì—ì„œ, ì´ì „ì—ëŠ” rwì˜ ì´ˆê¸°ìƒíƒœë¥¼ ì•Œ ìˆ˜ ì—†ì–´ì„œ, í•´ë‹¹ pageê°€ readê¶Œí•œë§Œ ìˆëŠ”ì§€, writeê¶Œí•œë„ ìˆëŠ”ì§€ë¥¼ ì•Œ ìˆ˜ ì—†ì—ˆë‹¤.
ì´ë¥¼ page fault handlerì—ì„œ ì•Œ ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´, ì´ì „ì˜ <code>pte</code>ì˜ <code>private</code>ë©¤ë²„ì—ëŠ” ì•„ë¬´ê²ƒë„ í• ë‹¹í•˜ì§€ ì•Šì•˜ìœ¼ë‚˜, <code>rw</code>ì˜ ì´ˆê¸°ìƒíƒœë¥¼ allocation ê³¼ì •ì—ì„œ ì €ì¥í•´ ì£¼ê¸°ë¡œ í•˜ì˜€ë‹¤.</p>
<h2 id="page-deallocation">Page Deallocation<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#page-deallocation" class="internal alias"> Â§</a></h2>
<p>ì£¼ì–´ì§„ <code>vpn</code>ì— ëŒ€í•´ í•´ë‹¹í•˜ëŠ” <code>pte</code>ë¥¼ í•´ì œì‹œì¼œì£¼ëŠ” ê³¼ì •ì´ë‹¤.
<code>alloc_page</code>ì—ì„œì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ <code>pd_index</code>ì™€ <code>pte_index</code>ë¥¼ ê³„ì‚°í•˜ì—¬ ì˜¬ë°”ë¥¸ page table entryë¥¼ ì°¾ì•„ê°„ ë’¤, <code>valid</code> bitì„ <code>false</code>ë¡œ ë°”ê¿”ì£¼ëŠ” ê³¼ì •ì´ ì£¼ìš”í•œ ìš”ì†Œì´ë‹¤. ì´ë•Œ, í•´ë‹¹í•˜ëŠ” <code>pfn</code>ì„ referencing í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ í•˜ë‚˜ ì¤„ì–´ë“  ê²ƒì´ë¯€ë¡œ, <code>mapcounts[pfn]</code>ì˜ ê°’ë„ 1ë§Œí¼ ê°ì†Œì‹œì¼œì¤€ë‹¤.</p>
<h3 id="commit-2b08f403-implement-alloc_page-and-free_page">commit 2b08f403: Implement <code>alloc_page</code> and <code>free_page</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#commit-2b08f403-implement-alloc_page-and-free_page" class="internal alias"> Â§</a></h3>
<p>ì´ˆê¸°ì— êµ¬í˜„í•  ë•Œ, <code>pte</code>ì— ëŒ€í•œ í˜¼ë™ì´ ìˆì–´, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë„ ê³µìœ í•œë‹¤ê³  ìƒê°í•˜ì˜€ëŠ”ì§€, í˜„ì¬ í”„ë¡œì„¸ìŠ¤ë§Œ ìœ ì¼í•˜ê²Œ í•´ë‹¹ page frameì„ ì°¸ì¡°í•˜ê³  ìˆì„ ë•Œ, <code>valid</code> bitì„ falseë¡œ ë³€ê²½í•˜ëŠ”.. ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ëŠ”ë°, ì´ëŠ” ë²„ê·¸ì´ë‹¤.
ë‹¹ì—°í•˜ê²Œë„, ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ <code>pagetable</code>ì´ ë”°ë¡œ ì¡´ì¬í•˜ë©°, <code>free</code>ë¥¼ í•œë‹¤ëŠ” ê²ƒì€ ë”ì´ìƒ í•´ë‹¹ page table entryê°€ <code>valid</code>í•˜ì§€ ì•Šì€ entryë¼ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì—, ê·¸ëŸ¬í•œ ì¡°ê±´ì„ í™•ì¸í•  í•„ìš” ì—†ì´, <code>valid</code> bitì„ <code>false</code>ë¡œ ë°”ë¡œ ë°”ê¾¸ì–´ì£¼ë©´ ëœë‹¤. ì´ëŠ” commit d89cd9e6ì—ì„œ ìˆ˜ì •ë˜ì—ˆë‹¤.</p>
<h2 id="fork">Fork<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#fork" class="internal alias"> Â§</a></h2>
<p>ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ, <code>switch_process</code>ì—ì„œ forkí•˜ëŠ” ê³¼ì •ì„ ê±°ì³ ìƒì„±í•œë‹¤.
ì¦‰, ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ, ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì‚¬ìš©ëœ ëª¨ë“  ë©”ëª¨ë¦¬ ì •ë³´ë“¤ì´ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ì— ë˜‘ê°™ì´ ë³µì‚¬ëœë‹¤.
ì´ë²ˆ forkì—ì„œëŠ” <code>process</code> dependent í•œ ì •ë³´ì¸ <code>pid</code>ì™€ <code>list</code> ë©¤ë²„ëŠ” ì˜¬ë°”ë¥¸ ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ì‹œì¼œì£¼ê³ , <code>pagetable</code>ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ ì£¼ì—ˆë‹¤.
<code>pagetable</code>ì„ ë³µì‚¬í•˜ê¸° ì „ Copy on writeì˜ êµ¬í˜„ì„ ìœ„í•´ ì „ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œë‹¤. ê·¸ ê³¼ì •ì€ ì¶”í›„ ìì„¸íˆ ì„¤ëª…í•œë‹¤.</p>
<p>ê¸°ì¡´ì— switchí•˜ë ¤ë˜ processê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° ìœ„ì™€ ê°™ì´ forkë¥¼ ì§„í–‰í•˜ë©° <code>pagetable</code>ì„ ë³µì‚¬í•´ì•¼ í•œë‹¤.
ì´ ê³¼ì •ì„ ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ <code>memcpy</code>ë¥¼ ì´ìš©í•˜ì—¬ ë³µì‚¬í•˜ì˜€ìœ¼ë‚˜, ì´ë ‡ê²Œ ë³µì‚¬í•  ê²½ìš° <code>pagetable</code>ì„ shallow copy í•œ ê²ƒì´ ë˜ì–´, ì„œë¡œ ë‹¤ë¥¸ process ì´ë”ë¼ë„ ê°™ì€ ì£¼ì†Œê°’ì„ ì°¸ì¡°í•˜ëŠ” ê²°ê³¼ë¥¼ ë””ë²„ê¹…ì„ í†µí•´ í™•ì¸í•˜ì˜€ë‹¤.
ë”°ë¼ì„œ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ <code>malloc</code>ì„ í†µí•´ ë‹¤ì‹œ ë™ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ë©°, outer_pteì™€ ptes ëª¨ë‘ ë‹¤ë¥¸ ì£¼ì†Œê³µê°„ì— ê°™ì€ ê°’ì„ ë³µì‚¬í•  ìˆ˜ ìˆë„ë¡ <code>pagetable</code>ì„ deep copyí•´ì£¼ëŠ” í•¨ìˆ˜ <code>clone_pagetable</code>ì„ í†µí•´ <code>pagetable</code>ì„ ë³µì œí•˜ì—¬ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹í•´ì£¼ì—ˆë‹¤.</p>
<p>ì´ ê³¼ì •ì—­ì‹œ copy on writeì„ ì´ìš©í•˜ì—¬ êµ¬í˜„í•  ìˆ˜ëŠ” ìˆê² ìœ¼ë‚˜, êµ¬í˜„ì˜ ë³µì¡ì„± ë•Œë¬¸ì— ìš°ì„  ë‹¨ìˆœ deep copyí•˜ëŠ” ë°©ì‹ì„ ì·¨í•˜ì˜€ë‹¤.</p>
<h2 id="copy-on-write">Copy on Write<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#copy-on-write" class="internal alias"> Â§</a></h2>
<p>ìš°ì„  ë‹¤ë¥¸ ì–˜ê¸°ì´ì§€ë§Œ, Apple WWDC 2017ì—ì„œ ìƒˆë¡­ê²Œ ì†Œê°œëœ APFS íŒŒì¼ ì‹œìŠ¤í…œì„ ì†Œê°œí•  ë•Œ, copy on writeì´ë¼ëŠ” ê²ƒì„ ì²˜ìŒ ì ‘í•´ë³´ì•˜ë‹¤.
ë‹¹ì‹œì—, ì´ëŸ¬í•œ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ íŒŒì¼ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ë³µì‚¬í•  ë•Œ ì†ë„ë„ ë¹ ë¥´ê³ , ë¬¼ë¦¬ì ì¸ ì €ì¥ê³µê°„ë„ ì ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ì„¼ì„¸ì´ì…”ë„í•˜ê²Œ ëŠê¼ˆë˜ ê¸°ì–µì´ ìˆë‹¤.</p>
<p>ì•½ 6ë…„ì´ ì§€ë‚˜ê³  ìš´ì˜ì²´ì œ ìˆ˜ì—…ì„ ë“¤ìœ¼ë©° copy on writeì„ ì˜¤ëœë§Œì— ë‹¤ì‹œë“£ê³ , ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•´ë³´ê²Œ ëœë‹¤ëŠ” ì ì—ì„œ ê°œì¸ì ìœ¼ë¡œ í¥ë¯¸ë¥¼ ëŠê¼ˆë‹¤.
APFSì˜ Storage ì°¨ì›ì˜ CoWì™€ ë‹¬ë¦¬, ì´ë²ˆ ê³¼ì œì—ì„œì˜ CoWì€ Memory ë‹¨ì—ì„œ ë™ì‘í•œë‹¤.</p>
<p>ë§ ê·¸ëŒ€ë¡œ, copy on writeì€ copyë¥¼ lazyí•˜ê²Œ, writeì„ ì‹œë„í•  ë•Œ ê·¸ì œì„œì•¼ copyë¥¼ í•˜ëŠ” ë°©ë²•ì„ ëœ»í•œë‹¤. ê·¸ êµ¬í˜„ì€ ë‹¤ìŒì˜ ì¼ë ¨ì˜ ê³¼ì •ê³¼ ê°™ë‹¤.</p>
<ul>
<li>process forkë¥¼ ì‹œë„í•˜ë©´, <code>pte</code>ë“¤ì˜ <code>rw</code> bitì„ read-onlyí•˜ê²Œ ë°”ê¾¸ì–´ì¤€ë‹¤.</li>
<li>ê·¸ë¦¬ê³ , ê°™ì€ page tableì„ deep copyí•˜ì—¬ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹í•´ ì£¼ë©´, ì„œë¡œ ë‹¤ë¥¸ <code>pagetable</code>ì—ì„œ ê°™ì€ <code>pfn</code>ì„ ì°¸ì¡°í•œë‹¤.</li>
<li>í•˜ì§€ë§Œ, ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì™€ ìì‹ í”„ë¡œì„¸ìŠ¤ ëª¨ë‘ <code>pte</code>ì˜ <code>rw</code> bitì´ read-only í•˜ê¸° ë•Œë¬¸ì—, writeì„ ì‹œë„í•  ê²½ìš° page faultê°€ ë°œìƒí•œë‹¤.</li>
<li>ì´ì™€ ê°™ì´ page faultê°€ ë°œìƒí•  ê²½ìš°, page fault handlerì—ì„œ í•´ë‹¹ page frameì„ ì°¸ì¡°í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ê°œìˆ˜(<code>mapcounts</code>)ë¥¼ í™•ì¸í•œë‹¤.
<ul>
<li><code>mapcounts[pfn] == 1</code>ì¼ ê²½ìš°ëŠ” í˜„ì¬ í”„ë¡œì„¸ìŠ¤ë§Œ í•´ë‹¹ page frameì„ ì°¸ì¡°í•˜ê³  ìˆëŠ” ìƒí™©ìœ¼ë¡œ ê¸°ì¡´ì˜ <code>rw</code> ê¶Œí•œì„ ë³µêµ¬ì‹œì¼œ ì¤€ë‹¤.</li>
<li><code>mapcounts[pfn] > 1</code>ì¼ ê²½ìš°, í˜„ì¬ í”„ë¡œì„¸ìŠ¤ ì™¸ì— ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë„ í•´ë‹¹ page frameì„ ì°¸ì¡°í•˜ê³  ìˆëŠ” ìƒí™©ìœ¼ë¡œ, page frameì— í•¨ë¶€ë¡œ write í•  ê²½ìš°, ë‹¤ë¥¸ processì— ì˜í–¥ì„ ë¯¸ì¹˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ, ìƒˆë¡œìš´ page frameì— ê¸°ì¡´ì˜ page frameì„ ë³µì‚¬í•˜ì—¬ ìƒˆë¡œìš´ page frameì„ ì°¸ì¡°í•˜ë„ë¡ <code>pfn</code>ì„ ë³€ê²½í•´ì¤€ë‹¤.</li>
</ul>
</li>
</ul>
<p>ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´, <code>switch_process</code>ì˜ <code>fork</code> ê³¼ì •ì—ì„œ, <code>pagetable</code>ì„ ë³µì‚¬í•˜ê¸° ì „ì—, <code>valid</code>í•œ <code>pte</code>ì— ëŒ€í•´ì„œ <code>mapcounts[pfn]</code>ì„ 1ì¦ê°€ì‹œí‚¤ê³ , <code>rw</code> bitì„ read-onlyí•˜ê²Œ ë³€ê²½í•´ì¤€ë’¤, <code>pagetable</code>ì„ ìƒˆë¡œìš´ processì— deep copy í•´ì£¼ì—ˆë‹¤.
<code>handle_page_fault</code>ì—ì„œëŠ” read-only pageì— writeì„ ì‹œë„í•˜ì—¬ page faultê°€ ë°œìƒí•˜ì˜€ì„ ë•Œ, ìœ„ì—ì„œ ì–¸ê¸‰í•œëŒ€ë¡œ í•¸ë“¤ë§í•˜ì˜€ë‹¤.</p>
<p>ì¦‰, commit 39eb584dì™€ 88c1a070ì´ ì‚¬ì‹¤ìƒ copy on writeì„ êµ¬í˜„í•œ commitì´ë¼ê³  ë³´ì•„ë„ ë¬´ë°©í•˜ë‹¤.</p>
<h3 id="testcase-testcasescow-2">Testcase: <code>testcases/cow-2</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#testcase-testcasescow-2" class="internal alias"> Â§</a></h3>
<p>ìš°ì„ , <code>testcases/cow-2</code>ì˜ ê²½ìš°, <code>NR_PTES_PER_PAGE=16</code>ì„ ë„˜ì–´ê°€ëŠ” vpn ì£¼ì†Œì˜ í• ë‹¹ì€ ì—†ë‹¤.
ë”°ë¼ì„œ, ëª¨ë“  vpnì˜ <code>outer_ptes</code>ëŠ” 0ë²ˆì§¸ <code>ptes</code>ê°€ ë˜ë¯€ë¡œ í¸ì˜ë¥¼ ìœ„í•´ <code>outer_ptes</code>ì— ëŒ€í•œ ì–¸ê¸‰ì€ ê°€ê¸‰ì  ìƒëµí•˜ë„ë¡ í•˜ê² ë‹¤.</p>
<h4 id="allocation-process0">allocation (@process#0)<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#allocation-process0" class="internal alias"> Â§</a></h4>
<p>ë¨¼ì €, process#0ì—ì„œ vpn 0(r) 1(r) 2(rw) 3(rw)ì˜ allocationì´ ì§„í–‰ëœë‹¤.
ì•ì—ì„œ ì–¸ê¸‰í–ˆë“¯ì´, <code>outer_ptes</code>ì˜ indexëŠ” 0ì´ê³ , 0ë²ˆì§¸ <code>ptes</code>ëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ëœë‹¤.</p>








































<div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">2</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">3</td><td style="text-align:center;">rw</td></tr></tbody></table></div>
<h4 id="switch-process0--process1">switch (process#0 <span>â†’</span> process#1)<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#switch-process0--process1" class="internal alias"> Â§</a></h4>
<p>process#0 ì—ì„œ process#1ë¡œ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ë³€ê²½ë˜ì—ˆë‹¤.
ì´ë•Œ, process#1ì€ ì´ì „ì— ì‹¤íš…ëœ ì ì´ ì—†ëŠ” í”„ë¡œì„¸ìŠ¤ë¡œ, process#0ë¥¼ <code>fork</code>í•˜ì—¬ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ê²Œ ëœë‹¤.
ê·¸ ê²°ê³¼, process#1ì˜ <code>pagetable</code>ì€ process#0ì˜ <code>pagetable</code>ê³¼ ê°™ì€ ê°’ì„ ê°€ì§„ë‹¤.
ë‹¤ë§Œ, copy on writeì„ ìœ„í•´ì„œ, process#0ì˜ pagetableì„ process#1ë¡œ ë³µì‚¬í•˜ê¸° ì „ì— pteê°€ ëª¨ë‘ <code>ACCESS_READ</code> ê¶Œí•œë§Œ ê°€ì§€ë„ë¡ í•˜ì—¬, <code>write</code>ì„ í•  ìˆ˜ ì—†ë„ë¡ í•œë‹¤.
ë§Œì•½, ì¶”í›„ <code>write</code>ì„ ì‹œë„í•œë‹¤ë©´, page faultê°€ ë°œìƒí•˜ëŠ”ë°, ì´ë•Œ, page fault handlerê°€ <code>mapcounts</code>ë¥¼ í™•ì¸í•˜ì—¬ í•´ë‹¹ pageë¥¼ reference í•˜ê³  ìˆëŠ” processê°€ ì—¬ëŸ¬ ê°œì¼ ê²½ìš°, ìƒˆë¡œìš´ pfnì„ í• ë‹¹ ë° ë³µì‚¬í•˜ì—¬ í•´ë‹¹ page frameì—ì„œ <code>write</code>ì´ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½í•œë‹¤.
ë”°ë¼ì„œ, process#0ê³¼ process#1ì˜ pteëŠ” fork ëœ í›„ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½ í˜¹ì€ í• ë‹¹ëœë‹¤.</p>
<h5 id="pagetable-of-both-process0-and-process1-identical-after-switch-1">pagetable of both process#0 and process#1 (identical) after <code>switch 1</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pagetable-of-both-process0-and-process1-identical-after-switch-1" class="internal alias"> Â§</a></h5>








































<div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;"><strong>r</strong></td><td style="text-align:center;">2</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;"><strong>r</strong></td><td style="text-align:center;">3</td><td style="text-align:center;">rw</td></tr></tbody></table></div>
<h5 id="read--write-on-process1">read &amp; write on process#1<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#read--write-on-process1" class="internal alias"> Â§</a></h5>
<p>process#1ì˜ <code>read 1</code>ì˜ ê²½ìš° read ê¶Œí•œì´ ìˆìœ¼ë¯€ë¡œ ë¬¸ì œì—†ì´ ë™ì‘í•œë‹¤.</p>
<p>process#1ì˜ <code>write 2</code>ì˜ ê²½ìš° forkë¥¼ í•˜ë©´ì„œ write ê¶Œí•œì´ ì‚¬ë¼ì¡Œê¸° ë•Œë¬¸ì—, ì•ì—ì„œ ì–¸ê¸‰í–ˆë“¯, page fault handlerê°€ ê¸°ì¡´ì— writeê°€ ê°€ëŠ¥í•œ pageì¸ì§€ í™•ì¸ í›„, ê°€ëŠ¥í•˜ë‹¤ë©´ ìƒˆë¡œìš´ pfnì„ ì°¾ì•„ì„œ í• ë‹¹ ë° ë³µì‚¬í•´ì¤€ë‹¤.
ì´ë²ˆ ê²½ìš°, pfn 4ë²ˆì´ ë¹„ì–´ìˆëŠ” ê°€ì¥ ë¹ ë¥¸ pfnì´ë¯€ë¡œ, ê¸°ì¡´ 2ë²ˆì˜ page frameì„ 4ë²ˆì˜ page frameì— ë³µì‚¬í•˜ì—¬ write ê¶Œí•œì„ ë¶€ì—¬í•œë‹¤.
ë”°ë¼ì„œ, process#1ì˜ pteëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½ëœë‹¤.</p>
<h5 id="pagetable-of-process1-after-read-1-and-write-2">pagetable of process#1 after <code>read 1</code> and <code>write 2</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pagetable-of-process1-after-read-1-and-write-2" class="internal alias"> Â§</a></h5>








































<div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;"><strong>rw</strong></td><td style="text-align:center;"><strong>4</strong></td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">3</td><td style="text-align:center;">rw</td></tr></tbody></table></div>
<h4 id="switch-process1--process2">switch (process#1 <span>â†’</span> process#2)<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#switch-process1--process2" class="internal alias"> Â§</a></h4>
<p>process#1 ì—ì„œ process#2ë¡œ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ë³€ê²½ë˜ì—ˆë‹¤.
ë§ˆì°¬ê°€ì§€ë¡œ, process#2ì€ ì´ì „ì— ì‹¤íš…ëœ ì ì´ ì—†ëŠ” í”„ë¡œì„¸ìŠ¤ë¡œ, process#0ë¥¼ <code>fork</code>í•˜ì—¬ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ë©´, readê¶Œí•œë§Œ ìˆëŠ” pteë“¤ì´ ë³µì‚¬ë˜ì–´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<h5 id="pagetable-of-both-process1-and-process2-identical-after-switch-1">pagetable of both process#1 and process#2 (identical) after <code>switch 1</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pagetable-of-both-process1-and-process2-identical-after-switch-1" class="internal alias"> Â§</a></h5>








































<div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;"><strong>r</strong></td><td style="text-align:center;">4</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">3</td><td style="text-align:center;">rw</td></tr></tbody></table></div>
<h5 id="read--write-on-process2">read &amp; write on process#2<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#read--write-on-process2" class="internal alias"> Â§</a></h5>
<p>process#2ì—ì„œ <code>read 1</code>ì„ ì‹œë„í•˜ë©´, ìœ„ì˜ pagetableì—ì„œ 1ë²ˆì§¸ index pteë¥¼ ê±°ì³ ë¬¸ì œì—†ì´ ì½ì„ ìˆ˜ ìˆë‹¤.
process#2ì—ì„œ <code>write 3</code>ì„ ì‹œë„í•˜ë©´, 3ë²ˆì§¸ index pteëŠ” read ê¶Œí•œë§Œ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— page faultê°€ ë°œìƒí•˜ê³ , page fault handlerê°€ ê¸°ì¡´ ê¶Œí•œì„ í™•ì¸í•œ í›„ ìƒˆë¡œìš´ pfnë¥¼ ì°¾ì•„ì„œ í• ë‹¹í•´ì¤€ë‹¤.
ì´ë²ˆ ê²½ìš°, pfn 5ë²ˆì´ ë¹„ì–´ìˆëŠ” ê°€ì¥ ì‘ì€ pfnìœ¼ë¡œ, ë‹¤ìŒê³¼ ê°™ì´ pagetableì´ ë³€ê²½ëœë‹¤.</p>
<h5 id="pagetable-of-process2-after-read-1-and-write-3">pagetable of process#2 after <code>read 1</code> and <code>write 3</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pagetable-of-process2-after-read-1-and-write-3" class="internal alias"> Â§</a></h5>








































<div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">4</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;"><strong>rw</strong></td><td style="text-align:center;">5</td><td style="text-align:center;">rw</td></tr></tbody></table></div>
<h4 id="switch-process2--process0">switch (process#2 <span>â†’</span> process#0)<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#switch-process2--process0" class="internal alias"> Â§</a></h4>
<p>process#0ì€ ê¸°ì¡´ì— ìƒì„±ë˜ì–´ ìˆë˜ í”„ë¡œì„¸ìŠ¤ë¡œ, <code>processes</code>ì—ì„œ ë¶ˆëŸ¬ì˜¨ë‹¤.
process#0ì˜ ë§ˆì§€ë§‰ ìƒíƒœì˜ pagetableì€ ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.</p>
<h5 id="pagetable-of-process0-after-switch-0-loads-last-state-of-process0s-pagetable">pagetable of process#0 after <code>switch 0</code> (loads last state of process#0â€™s pagetable)<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pagetable-of-process0-after-switch-0-loads-last-state-of-process0s-pagetable" class="internal alias"> Â§</a></h5>








































<div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">2</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">3</td><td style="text-align:center;">rw</td></tr></tbody></table></div>
<p>ì´ë•Œ, <code>read 2</code>ì˜ ê²½ìš° ì •ìƒì ìœ¼ë¡œ pagetableì„ í™•ì¸í•˜ì—¬ ì½ì–´ì˜¬ ìˆ˜ ìˆë‹¤.</p>
<p><code>write 2</code>ë¥¼ í•  ê²½ìš°, 2ë²ˆ indexëŠ” readê¶Œí•œë§Œ ìˆê¸° ë•Œë¬¸ì—, page faultê°€ ë°œìƒí•˜ì—¬ page fault handlerê°€ ë™ì‘í•œë‹¤.
í•˜ì§€ë§Œ, <code>mapcounts</code> ë°°ì—´ì—ì„œ pfn 2ë¥¼ ì°¸ì¡°í•˜ëŠ” processê°€ ìì‹ ìœ¼ë¡œ í•˜ë‚˜ë¿ì´ê¸° ë•Œë¬¸ì—, rw ê¶Œí•œìœ¼ë¡œ ë°”ê¾¸ì–´ë„ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
ë”°ë¼ì„œ rw ê¶Œí•œìœ¼ë¡œ ë°”ê¾¼ ë’¤, pfn 2ì— writeì„ í•œë‹¤.</p>
<h5 id="pagetable-of-process0-after-write-2">pagetable of process#0 after <code>write 2</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pagetable-of-process0-after-write-2" class="internal alias"> Â§</a></h5>








































<div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">2</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">3</td><td style="text-align:center;">rw</td></tr></tbody></table></div>
<p><code>write 3</code>ì„ í•  ê²½ìš°, 3ë²ˆ indexëŠ” read ê¶Œí•œë§Œ ìˆê¸° ë•Œë¬¸ì—, page faultê°€ ë°œìƒí•˜ì—¬ page fault handlerê°€ ë™ì‘í•œë‹¤.
2ë²ˆ pfnê³¼ ë‹¬ë¦¬ 3ë²ˆ pfnì˜ ê²½ìš° í˜„ì¬ process#1 ì—­ì‹œ ì°¸ì¡°í•˜ê³  ìˆëŠ” ìƒí™©ì´ê¸° ë•Œë¬¸ì— <code>mapcounts</code>ì—ì„œ í™•ì¸í•œ reference countëŠ” 2ê°€ ë˜ë©°, ì´ì— ë”°ë¼ ìƒˆë¡œìš´ pfnì„ í• ë‹¹í•´ì£¼ì–´ì•¼ í•œë‹¤.
ë”°ë¼ì„œ, ê°€ì¥ ì‘ì€ ì‚¬ìš©í•˜ì§€ ì•Šì€ pfnì¸ 6ë²ˆì„ í• ë‹¹í›„ rwê¶Œí•œì„ ë¶€ì—¬í•´ì„œ writeë¥¼ í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½ëœë‹¤.</p>
<p>ìœ„ì™€ ê°™ì€ ê³¼ì •ì„ ê±°ì¹œ process#0ì˜ pagetableì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<h5 id="pagetable-of-process0-after-write-3">pagetable of process#0 after <code>write 3</code><a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pagetable-of-process0-after-write-3" class="internal alias"> Â§</a></h5>








































<div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">2</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">6</td><td style="text-align:center;">rw</td></tr></tbody></table></div>
<p>ê²°êµ­, ì„¸ í”„ë¡œì„¸ìŠ¤ì˜ ìµœì¢… pagetableì˜ ìƒíƒœëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ëœë‹¤.</p>

  
  <div class="table-container"><table><tbody><tr><th>process#0</th><th>process#1</th><th>process#2</th></tr><tr><td>
      <div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">2</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">6</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">...</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">15</td><td style="text-align:center;">F</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table></div>
    </td><td>
      <div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">4</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">3</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">...</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">15</td><td style="text-align:center;">F</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table></div>
    </td><td>
      <div class="table-container"><table><thead><tr><th style="text-align:center;">index</th><th style="text-align:center;">valid</th><th style="text-align:center;">rw</th><th style="text-align:center;">pfn</th><th style="text-align:center;">private</th></tr></thead><tbody><tr><td style="text-align:center;">0</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">0</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">1</td><td style="text-align:center;">r</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">T</td><td style="text-align:center;">r</td><td style="text-align:center;">4</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">T</td><td style="text-align:center;">rw</td><td style="text-align:center;">5</td><td style="text-align:center;">rw</td></tr><tr><td style="text-align:center;">...</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">15</td><td style="text-align:center;">F</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table></div>
    </td></tr></tbody></table></div>

<p>ë‹¤ì‹œí•œë²ˆ ê·¸ ê³¼ì •ì„ ë„ì‹í™”í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.
<img src="./attachments/Pasted-image-20240305214845.png" width="auto" height="auto"/></p>
<h2 id="tlb">TLB<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#tlb" class="internal alias"> Â§</a></h2>
<p>TLBëŠ” Translation Look-aside Bufferì„ ì¤„ì¸ë§ë¡œ, principle of locality íŠ¹ì„± ë•Œë¬¸ì— ì´ì „ì— ì½ê±°ë‚˜ ì“´ ê°’ì€ ì•ìœ¼ë¡œë„ ì½ê±°ë‚˜ ì“¸ ê°€ëŠ¥ì„±ì´ ë†’ì•„ bufferì— í•´ë‹¹ pteì— ê´€í•œ ì •ë³´ë¥¼ ì ì–´ë‘ì–´ <code>pagetable</code>ì„ ì§ì ‘ ì°¸ì¡°í•˜ì§€ ì•Šê³ ë„, pteì— ë”ìš± ë¹ ë¥¸ ì ‘ê·¼ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” bufferì´ë‹¤.
ë³¸ë˜ ì˜ë„ëŠ” pteì— ë”ìš± ë¹ ë¥´ê²Œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê²ƒì´ì§€ë§Œ, ì´ë²ˆ ê³¼ì œì—ì„œëŠ” tlbì—ì„œ ì¼ì¹˜í•˜ëŠ” <code>vpn</code>ì„ ì°¾ëŠ” ê³¼ì •ì—ì„œ for loopì„ ê±°ì¹˜ê¸° ë•Œë¬¸ì—, ì˜¤íˆë ¤ ë” ëŠë¦´ ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•˜ê¸°ëŠ” í•˜ë‹¤.
ë‹¤ë§Œ, ê°„ë‹¨í•œ ì‹œë®¬ë ˆì´í„°ì„ì„ ê°€ì •í•˜ë¯€ë¡œ ì´ëŸ¬í•œ ì°¨ì´ëŠ” ìš°ì„  ë¬´ì‹œí•˜ë„ë¡ í•œë‹¤.</p>
<p>TLBë¥¼ êµ¬í˜„í•  ë•Œ, processê°„ ìŠ¤ìœ„ì¹˜ê°€ ë˜ì—ˆì„ ê²½ìš°ì— ëŒ€í•´ TLBë¥¼ ì–´ë–»ê²Œ update ì‹œì¼œì•¼ í• ì§€ì— ëŒ€í•œ ê³ ë¯¼ì´ ìˆì—ˆë‹¤.
processsë¥¼ switch í•  ë•Œ, ì´ì „ì˜ pidë¥¼ <code>private</code> ë©¤ë²„ì— ì €ì¥í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì¦‰, Address-Space Identifiers (ASIDs) ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ë„ ì¡´ì¬í•˜ê³ , ê·¸ëƒ¥ tlb flush ì‹œí‚¤ëŠ” ë°©ë²•ë„ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
í•˜ì§€ë§Œ ê²°êµ­ êµ¬í˜„ì˜ í¸ì˜ ë•Œë¬¸ì— tlb flush ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì„ íƒí•˜ì˜€ë‹¤.</p>
<p>ë˜, ì´ë²ˆ ê³¼ì œì—ì„œëŠ” ì…ë ¥ì´ ì ì–´ ê³ ë ¤ë˜ì§€ ì•Šì•˜ì§€ë§Œ, TLB entryê°€ <code>NR_TLB_ENTRIES</code>ë¥¼ ë„˜ì–´ victimì„ ê³¨ë¼ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
ì´ëŸ¬í•œ ê²½ìš°ê°€ ìƒê¸´ë‹¤ë©´, Beladyâ€™s Algorithm, FIFO, LRU ë“±ë“±ì˜ ë°©ë²•ì„ ì´ìš©í•˜ì—¬ victim pageë¥¼ ì„ íƒí•˜ì—¬ í•´ë‹¹ tlb entry ë¥¼ freeì‹œì¼œ ì‚¬ìš©í•˜ë©´ ë  ê²ƒì´ë‹¤.</p>
<p><code>read</code> í˜¹ì€ <code>write</code> operationì„ í•˜ì˜€ì„ ë•Œ, í•´ë‹¹ vpnì´ tlbì— ì í˜€ìˆëŠ”ì§€ <code>lookup_tlb</code>ë¥¼ í†µí•´ì„œ ì°¸ì¡°í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œë‹¤.
ë§Œì•½ í•´ë‹¹ <code>vpn</code>ì— ëŒ€í•œ tlb entryê°€ ì¡´ì¬í•˜ê³ , rw bitì„ ì°¸ì¡°í•˜ì—¬ í—ˆìš©ë˜ëŠ” operationì¼ ê²½ìš°, tlb hit ëœê²ƒìœ¼ë¡œ íŒë‹¨í•˜ì—¬ tlbì— ì í˜€ì§„ <code>pfn</code>ì„ ë³´ê³  MMUê°€ <code>vpn</code>ì„ ë³€í™˜í•˜ê²Œ ëœë‹¤.
í•˜ì§€ë§Œ tlb hitì´ ë‚˜ì§€ ì•Šì•˜ì„ ê²½ìš°, ì¶”í›„ì— ì°¸ì¡°í•  ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•´ì„œ tlbì— <code>pte</code>ì˜ ì •ë³´ë¥¼ ì‘ì„±í•´ì£¼ì–´ì•¼ í•œë‹¤.
ì´ë¥¼ ìœ„í•´ì„œ ë¨¼ì € ì£¼ì–´ì§„ <code>vpn</code>ì— ë§¤ì¹­í•˜ëŠ” <code>pte</code>ë¥¼ ì°¾ì•„ <code>rw</code> bit, <code>pfn</code> ê°’ ë“±ì„ ì°¸ì¡°í•œë‹¤.
ì´ë ‡ê²Œ ì½ì–´ì˜¨ ê°’ë“¤ì„ <code>insert_tlb</code>ì—ì„œ tlbì— ì‚½ì… í˜¹ì€ updateí•˜ê²Œ ë˜ëŠ” ê³¼ì •ì„ êµ¬í˜„í•˜ë©´ tlbì— ëŒ€í•œ ì£¼ìš” êµ¬í˜„ì€ ë§ˆë¬´ë¦¬ ë˜ì—ˆë‹¤.</p>
<p><del>í•˜ì§€ë§Œ, ì‚¬ì†Œí•˜ê²Œ ì‹ ê²½ì¨ì£¼ì–´ì•¼ í•˜ëŠ”ê²ƒë“¤ë¡œ, pteì˜ ê°’ë“¤ì´ ë°”ë€Œì—ˆì„ ë•Œ, tlbì˜ ê°’ë„ ë³€ê²½í•´ì„œ update í•´ì£¼ì–´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.</del>
<del>ì´ë²ˆ ê³¼ì œì˜ ê²½ìš°, testcaseì—ì„œ ì´ë¥¼ ê²€ì¶œí•˜ëŠ” caseëŠ” ì¡´ì¬í•˜ì§€ ì•Šì•„ ë¬¸ì œì—†ì´ í†µê³¼í•˜ì˜€ì§€ë§Œ, ì´ë¥¼ ê³ ë ¤í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, page faultê°€ ë‚œ ì´í›„ write í•˜ëŠ” ê³¼ì •ì—ì„œ tlbì™€ pteì— ì €ì¥ëœ rw bitì´ë‚˜ pfn ê°’ì´ ë‹¬ë¼ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</del>
<del>ì´ëŸ¬í•œ ë¬¸ì œì ì„ ì¸ì§€í•˜ê³ , commit 253cc7f7ì—ì„œ ìˆ˜ì •í•˜ì˜€ë‹¤.</del></p>
<p>ì¶”í›„, <code>vm.c</code>ë¥¼ í™•ì¸í•˜ì˜€ëŠ”ë°, <code>__translate</code> ì—ì„œ <code>insert_tlb</code>ë¥¼ í†µí•´ì„œ tlbë¥¼ update í•´ì£¼ëŠ” ê³¼ì •ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ê³ , í•´ë‹¹ ì½”ë“œë¥¼ ì‚­ì œí•˜ì˜€ë‹¤.</p>
<h2 id="commit-f7f01b80-cleanup--add-comments">commit f7f01b80: cleanup &amp; add comments<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#commit-f7f01b80-cleanup--add-comments" class="internal alias"> Â§</a></h2>
<p>ìš°ì„ , <code>pd</code>ë¼ëŠ” ë³€ìˆ˜ì˜ ì´ë¦„ì´ ì˜ ì™€ë‹¿ì§€ ì•Šì•„, ì–´ë ¤ì›€ì´ ìˆì—ˆëŠ”ë°, ê²°êµ­ ìµœì¢… <code>pte</code>ë¥¼ ì•Œì•„ë‚´ê¸° ì „ì˜ ë§ˆì§€ë§‰ page table ì´ë¯€ë¡œ, <code>pt</code>ë¡œ ì´ë¦„ì„ ë³€ê²½í•˜ì˜€ë‹¤.</p>
<p>ê·¸ë¦¬ê³ , DRY(Donâ€™t Repeat Yourself) ì›ì¹™ê³¼ readabilityë¥¼ ìœ„í•´ì„œ, <code>pt</code>ì™€ <code>pte</code>ë¥¼ êµ¬í•˜ëŠ” ê³¼ì •ì„ <code>get_pt</code>ì™€ <code>get_pte</code>ë¼ëŠ” ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ì˜€ë‹¤.</p>
<h2 id="lessons-learned">Lessons Learned<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#lessons-learned" class="internal alias"> Â§</a></h2>
<ul>
<li>ì´ë²ˆ ê³¼ì œë¥¼ í†µí•´ì„œ memory management unitì´ pagetableì„ ì¡°íšŒí•˜ë©° vpnì„ pfnìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ êµ¬í˜„í•˜ë©°, vpnì— í•´ë‹¹í•˜ëŠ” pteë¥¼ ì–´ë–»ê²Œ ì°¾ì•„ê°€ëŠ” ê³¼ì •ì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.</li>
<li>ìƒˆë¡œìš´ processë¥¼ forkí•  ë•Œ, shared memoryë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. í•˜ì§€ë§Œ, writeì„ í•  ë•Œì—ëŠ”, ì„œë¡œ ë‹¤ë¥¸ process ê³µìœ í•˜ê³  ìˆëŠ” ë©”ëª¨ë¦¬ì— ì‘ì„±í•  ê²½ìš° ë¬¸ì œê°€ ëœë‹¤. ë”°ë¼ì„œ, forkí•˜ëŠ” processì˜ pteë¥¼ ëª¨ë‘ read only pageë¡œ ë°”ê¾¸ì–´ì¤€ ë’¤, writeì„ ì‹œë„í•˜ì—¬ page faultê°€ ë°œìƒí•˜ë©´ handlerê°€ ê·¸ì œì„œì•¼ í•´ë‹¹ pageë¥¼ copy í•´ì£¼ëŠ” ë°©ì‹ì¸ Copy on writeì„ ì´ìš©í•˜ì˜€ë‹¤. ë˜, ì´ëŸ° ê³¼ì •ì„ ê±°ì³, í•´ë‹¹ pageë¥¼ ì°¸ì¡°í•˜ëŠ” processê°€ ê²°êµ­ í•˜ë‚˜ê°€ ë˜ì—ˆì„ ê²½ìš°ì—ëŠ” ë‹¤ì‹œ ê¸°ì¡´ì˜ <code>rw</code> bitì„ ë³µêµ¬ì‹œì¼œì£¼ì—ˆë‹¤.</li>
<li>TLB ë¥¼ ì´ìš©í•˜ì—¬ page table entryë¥¼ ë”ìš± ë¹¨ë¦¬ ì°¾ì„ ìˆ˜ ìˆëŠ”ë°, read í˜¹ì€ write ëª…ë ¹ì´ ë°œìƒí•  ë•Œë§ˆë‹¤, ì´ì „ì— TLBì— ë“±ë¡ëœ ì ì´ ì—†ëŠ” vpnì´ë¼ë©´, TLBì— ë“±ë¡ì‹œí‚¤ëŠ” ê³¼ì •ì„ êµ¬í˜„í•˜ì˜€ë‹¤. ë˜, ì£¼ì–´ì§„ vpnê³¼ rw ìƒíƒœì— ëŒ€í•´ì„œ tlb hitì´ ë‚˜ëŠ”ì§€ íŒë³„í•˜ëŠ” ê³¼ì •ì„ êµ¬í˜„í•˜ì˜€ë‹¤. TLBë¥¼ ì´ì „ì—ëŠ” ë§ˆëƒ¥ pagetableì„ ìºì‹œí•´ë‘” ê²ƒìœ¼ë¡œ ì¶”ìƒì ìœ¼ë¡œ ì•Œê³  ìˆì—ˆì§€ë§Œ, ì–¸ì œ ë“±ë¡ë˜ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ìì„¸íˆ ì•Œì§€ ëª»í•˜ì˜€ë‹¤. ë¬¼ë¡  ì‹¤ì œ ìš´ì˜ì²´ì œì—ì„œëŠ” ë” ë³µì¡í•œ ì¡°ê±´ì´ ìˆì„ ìˆ˜ ìˆì§€ë§Œ, ì´ë²ˆ ê³¼ì œë¥¼ í†µí•´ì„œ ê°„ë‹¨í•˜ê²Œë‚˜ë§ˆ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.</li>
</ul>
<hr/></article></div><div class="right sidebar"><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#abstract" data-for="abstract">Abstract</a></li><li class="depth-0"><a href="#page-allocation" data-for="page-allocation">Page Allocation</a></li><li class="depth-1"><a href="#commit-2b08f40-implement-alloc_page-and-free_page" data-for="commit-2b08f40-implement-alloc_page-and-free_page">commit 2b08f40: Implement alloc_page and free_page</a></li><li class="depth-1"><a href="#commit-88c1a07-implement-handle_page_fault" data-for="commit-88c1a07-implement-handle_page_fault">commit 88c1a07: implement: handle_page_fault</a></li><li class="depth-0"><a href="#page-deallocation" data-for="page-deallocation">Page Deallocation</a></li><li class="depth-1"><a href="#commit-2b08f403-implement-alloc_page-and-free_page" data-for="commit-2b08f403-implement-alloc_page-and-free_page">commit 2b08f403: Implement alloc_page and free_page</a></li><li class="depth-0"><a href="#fork" data-for="fork">Fork</a></li><li class="depth-0"><a href="#copy-on-write" data-for="copy-on-write">Copy on Write</a></li><li class="depth-1"><a href="#testcase-testcasescow-2" data-for="testcase-testcasescow-2">Testcase: testcases/cow-2</a></li><li class="depth-0"><a href="#tlb" data-for="tlb">TLB</a></li><li class="depth-0"><a href="#commit-f7f01b80-cleanup--add-comments" data-for="commit-f7f01b80-cleanup--add-comments">commit f7f01b80: cleanup &amp; add comments</a></li><li class="depth-0"><a href="#lessons-learned" data-for="lessons-learned">Lessons Learned</a></li></ul></div></div><div class="graph desktop-only"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="backlinks desktop-only"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div><div class="explorer mobile-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;ARM&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Exceptions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Instructions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Registers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ARM/Registers/Program-Status-Registers-(PSR)&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Flutter&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Kernel-APIs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Kernel-Labs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Linux/Linux-Commands&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cookie&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)/Appendix&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/Cosmos-(ongoing)/Daily-Notes&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/OS-Assignments&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Projects/WePlan&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;ë’¤ì£½ë°•ì£½&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM"><a href="../../ARM" data-for="ARM" class="folder-title">ARM</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Exceptions"><a href="../../ARM/Exceptions" data-for="Exceptions" class="folder-title">Exceptions</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Exceptions"><li><a href="../../ARM/Exceptions/Exception-Handling-Registers" data-for="ARM/Exceptions/Exception-Handling-Registers">Exception Handling Registers</a></li><li><a href="../../ARM/Exceptions/Exception-Levels" data-for="ARM/Exceptions/Exception-Levels">Exception Levels</a></li><li><a href="../../ARM/Exceptions/Exception-Vector-Table" data-for="ARM/Exceptions/Exception-Vector-Table">Exception Vector Table</a></li><li><a href="../../ARM/Exceptions/Interrupt" data-for="ARM/Exceptions/Interrupt">Interrupt</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Instructions"><a href="../../ARM/Instructions" data-for="Instructions" class="folder-title">A-Profile A64 Instructions</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Instructions"><li><a href="../../ARM/Instructions/cmp" data-for="ARM/Instructions/cmp">cmp</a></li><li><a href="../../ARM/Instructions/DMB-DSB-ISB" data-for="ARM/Instructions/DMB-DSB-ISB">DMB DSB ISB</a></li><li><a href="../../ARM/Instructions/MRS-MSR" data-for="ARM/Instructions/MRS-MSR">MSR MSR</a></li><li><a href="../../ARM/Instructions/STP" data-for="ARM/Instructions/STP">STP</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Registers"><a href="../../ARM/Registers" data-for="Registers" class="folder-title">A-Profile Registers</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Registers"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ARM/Registers/Program-Status-Registers-(PSR)"><a href="../../ARM/Registers/Program-Status-Registers-(PSR)" data-for="Program-Status-Registers-(PSR)" class="folder-title">Program Status Registers</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ARM/Registers/Program-Status-Registers-(PSR)"><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/APSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/APSR">APSR</a></li><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/CPSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/CPSR">CPSR</a></li><li><a href="../../ARM/Registers/Program-Status-Registers-(PSR)/SPSR" data-for="ARM/Registers/Program-Status-Registers-(PSR)/SPSR">SPSR</a></li></ul></div></li><li><a href="../../ARM/Registers/DAIF" data-for="ARM/Registers/DAIF">DAIF</a></li><li><a href="../../ARM/Registers/HCR_EL2" data-for="ARM/Registers/HCR_EL2">HCR_EL2</a></li><li><a href="../../ARM/Registers/SPSel" data-for="ARM/Registers/SPSel">SPSel</a></li><li><a href="../../ARM/Registers/VBAR_EL1" data-for="ARM/Registers/VBAR_EL1">VBAR_EL1</a></li></ul></div></li><li><a href="../../ARM/Learn-The-Architecture" data-for="ARM/Learn-The-Architecture">Learn The Architecture</a></li><li><a href="../../ARM/Processor-Modes" data-for="ARM/Processor-Modes">Processor Modes</a></li><li><a href="../../ARM/Timer" data-for="ARM/Timer">Timer</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Flutter"><a href="../../Flutter" data-for="Flutter" class="folder-title">Flutter</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Flutter"><li><a href="../../Flutter/Architecture" data-for="Flutter/Architecture">Architecture</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux"><a href="../../Linux" data-for="Linux" class="folder-title">Linux</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Kernel-APIs"><a href="../../Linux/Kernel-APIs" data-for="Kernel-APIs" class="folder-title">Kernel API</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Kernel-APIs"><li><a href="../../Linux/Kernel-APIs/kernel-â†”-user" data-for="Linux/Kernel-APIs/kernel-â†”-user">kernel â†” user</a></li><li><a href="../../Linux/Kernel-APIs/mknod" data-for="Linux/Kernel-APIs/mknod">mknod</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Kernel-Labs"><a href="../../Linux/Kernel-Labs" data-for="Kernel-Labs" class="folder-title">Kernel Labs</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Kernel-Labs"><li><a href="../../Linux/Kernel-Labs/00_Introduction" data-for="Linux/Kernel-Labs/00_Introduction">Introduction</a></li><li><a href="../../Linux/Kernel-Labs/03_Character-Device-Drivers" data-for="Linux/Kernel-Labs/03_Character-Device-Drivers">Character Device Drivers</a></li><li><a href="../../Linux/Kernel-Labs/04_IO-access-and-Interrupts" data-for="Linux/Kernel-Labs/04_IO-access-and-Interrupts">I/O access and Interrupts</a></li><li><a href="../../Linux/Kernel-Labs/05_Deferred-Work" data-for="Linux/Kernel-Labs/05_Deferred-Work">Deferred Work</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Linux/Linux-Commands"><a href="../../Linux/Linux-Commands" data-for="Linux-Commands" class="folder-title">Linux Commands</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Linux/Linux-Commands"><li><a href="../../Linux/Linux-Commands/Linux-BIOS" data-for="Linux/Linux-Commands/Linux-BIOS">Linux BIOS</a></li><li><a href="../../Linux/Linux-Commands/rsync" data-for="Linux/Linux-Commands/rsync">rsync</a></li><li><a href="../../Linux/Linux-Commands/Upgrade-Debian" data-for="Linux/Linux-Commands/Upgrade-Debian">Upgrade Debian</a></li></ul></div></li><li><a href="../../Linux/ELF" data-for="Linux/ELF">ELF</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects"><a href="../../Projects" data-for="Projects" class="folder-title">Projects</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cookie"><a href="../../Projects/Cookie" data-for="Cookie" class="folder-title">Cookie</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cookie"><li><a href="../../Projects/Cookie/0314_ì•„ì´ë””ì–´ë°œí‘œ" data-for="Projects/Cookie/0314_ì•„ì´ë””ì–´ë°œí‘œ">3/14 ì•„ì´ë””ì–´ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0328_ë°œí‘œ" data-for="Projects/Cookie/0328_ë°œí‘œ">3/28 5ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0411_ë°œí‘œ" data-for="Projects/Cookie/0411_ë°œí‘œ">4/11 7ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0425_ë°œí‘œ" data-for="Projects/Cookie/0425_ë°œí‘œ">4/25 9ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0509_ë°œí‘œ" data-for="Projects/Cookie/0509_ë°œí‘œ">5/9 13ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0523_ë°œí‘œ" data-for="Projects/Cookie/0523_ë°œí‘œ">5/23 15ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0613_ë°œí‘œ" data-for="Projects/Cookie/0613_ë°œí‘œ">6/13 18ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0620_ìµœì¢…ë°œí‘œ" data-for="Projects/Cookie/0620_ìµœì¢…ë°œí‘œ">6/20 1í•™ê¸° ìµœì¢…ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0911_ì†Œê°œë°œí‘œ" data-for="Projects/Cookie/0911_ì†Œê°œë°œí‘œ">9/11 2í•™ê¸° ì†Œê°œë°œí‘œ</a></li><li><a href="../../Projects/Cookie/0925_ë°œí‘œ" data-for="Projects/Cookie/0925_ë°œí‘œ">9/25 4ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1023_ë°œí‘œ" data-for="Projects/Cookie/1023_ë°œí‘œ">10/23 8ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1106_ë°œí‘œ" data-for="Projects/Cookie/1106_ë°œí‘œ">11/6 10ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1120_ë°œí‘œ" data-for="Projects/Cookie/1120_ë°œí‘œ">11/20 12ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1211_ë°œí‘œ" data-for="Projects/Cookie/1211_ë°œí‘œ">12/11 14ì£¼ì°¨ ë°œí‘œ</a></li><li><a href="../../Projects/Cookie/1218_ìµœì¢…ë°œí‘œ" data-for="Projects/Cookie/1218_ìµœì¢…ë°œí‘œ">12/18 2í•™ê¸° ìµœì¢…ë°œí‘œ</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)"><a href="../../Projects/Cosmos-(ongoing)" data-for="Cosmos-(ongoing)" class="folder-title">Cosmos (ongoing)</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)/Appendix"><a href="../../Projects/Cosmos-(ongoing)/Appendix" data-for="Appendix" class="folder-title">Appendix</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)/Appendix"><li><a href="../../Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map" data-for="Projects/Cosmos-(ongoing)/Appendix/Virt-Board-Memory-Map">Virt Board Memory Map</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/Cosmos-(ongoing)/Daily-Notes"><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes" data-for="Daily-Notes" class="folder-title">Daily Notes</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/Cosmos-(ongoing)/Daily-Notes"><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-28">2024-03-28</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-03-29">2024-03-29</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-01" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-01">2024-04-01</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-03" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-03">2024-04-03</a></li><li><a href="../../Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-08" data-for="Projects/Cosmos-(ongoing)/Daily-Notes/2024-04-08">2024-04-08</a></li></ul></div></li><li><a href="../../Projects/Cosmos-(ongoing)/00_Mid-Report" data-for="Projects/Cosmos-(ongoing)/00_Mid-Report">cosmos ì¤‘ê°„ë³´ê³ ì„œ</a></li><li><a href="../../Projects/Cosmos-(ongoing)/01_Intro" data-for="Projects/Cosmos-(ongoing)/01_Intro">Introduction</a></li><li><a href="../../Projects/Cosmos-(ongoing)/02_QEMU" data-for="Projects/Cosmos-(ongoing)/02_QEMU">QEMU ì„¸íŒ…</a></li><li><a href="../../Projects/Cosmos-(ongoing)/03_Booting" data-for="Projects/Cosmos-(ongoing)/03_Booting">Booting</a></li><li><a href="../../Projects/Cosmos-(ongoing)/04_Device-Tree" data-for="Projects/Cosmos-(ongoing)/04_Device-Tree">Device Tree</a></li><li><a href="../../Projects/Cosmos-(ongoing)/05_Bootloading" data-for="Projects/Cosmos-(ongoing)/05_Bootloading">Boot Loading</a></li><li><a href="../../Projects/Cosmos-(ongoing)/06_Interrupt-Handling-01" data-for="Projects/Cosmos-(ongoing)/06_Interrupt-Handling-01">Interrupt Handling 01</a></li><li><a href="../../Projects/Cosmos-(ongoing)/07_Interrupt-Handling-02" data-for="Projects/Cosmos-(ongoing)/07_Interrupt-Handling-02">Interrupt Handling 02</a></li><li><a href="../../Projects/Cosmos-(ongoing)/08_Interrupt-Handling-03" data-for="Projects/Cosmos-(ongoing)/08_Interrupt-Handling-03">Interrupt Handling 02</a></li><li><a href="../../Projects/Cosmos-(ongoing)/09_Memory-Layout" data-for="Projects/Cosmos-(ongoing)/09_Memory-Layout">Memory Layout</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/OS-Assignments"><a href="../../Projects/OS-Assignments" data-for="OS-Assignments" class="folder-title">OS Assignments</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/OS-Assignments"><li><a href="../../Projects/OS-Assignments/pa0" data-for="Projects/OS-Assignments/pa0">PA0: Warming up C programming</a></li><li><a href="../../Projects/OS-Assignments/pa1" data-for="Projects/OS-Assignments/pa1">PA1: My Amazing Shell</a></li><li><a href="../../Projects/OS-Assignments/pa2" data-for="Projects/OS-Assignments/pa2">PA2: Simulating Process Schedulers</a></li><li><a href="../../Projects/OS-Assignments/pa3" data-for="Projects/OS-Assignments/pa3">PA3: Virtual Memory Simulator</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Projects/WePlan"><a href="../../Projects/WePlan" data-for="WePlan" class="folder-title">WePlan - ê³µë™ê³µê°„ ì˜ˆì•½ ì„œë¹„ìŠ¤</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Projects/WePlan"><li><a href="../../Projects/WePlan/01_Project-Proposal" data-for="Projects/WePlan/01_Project-Proposal">Project Proposal</a></li><li><a href="../../Projects/WePlan/02_Requirements-Specification" data-for="Projects/WePlan/02_Requirements-Specification">Requirements Specification</a></li><li><a href="../../Projects/WePlan/03_Design-Document" data-for="Projects/WePlan/03_Design-Document">Design Document</a></li><li><a href="../../Projects/WePlan/04_Final-Project-Report" data-for="Projects/WePlan/04_Final-Project-Report">Final Project Report</a></li></ul></div></li><li><a href="../../Projects/Doge_Driver" data-for="Projects/Doge_Driver">Doge Driver</a></li><li><a href="../../Projects/Elevator-Controller" data-for="Projects/Elevator-Controller">ì—˜ë ˆë² ì´í„° ì»¨íŠ¸ë¡¤ëŸ¬</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="ë’¤ì£½ë°•ì£½"><a href="../../ë’¤ì£½ë°•ì£½" data-for="ë’¤ì£½ë°•ì£½" class="folder-title">ğŸ¤ª ë’¤ì£½ë°•ì£½</a></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="ë’¤ì£½ë°•ì£½"><li><a href="../../ë’¤ì£½ë°•ì£½/2024-02-ë„¤íŠ¸ì›Œí¬-ì‚½ì§ˆ" data-for="ë’¤ì£½ë°•ì£½/2024-02-ë„¤íŠ¸ì›Œí¬-ì‚½ì§ˆ">2024-02 ë„¤íŠ¸ì›Œí¬ ì‚½ì§ˆ</a></li><li><a href="../../ë’¤ì£½ë°•ì£½/Github-Actions" data-for="ë’¤ì£½ë°•ì£½/Github-Actions">Github Actions ìœ¼ë¡œ obsidian-quartz ë¸”ë¡œê·¸ í¼ë¸”ë¦¬ì‹œ</a></li><li><a href="../../ë’¤ì£½ë°•ì£½/OpenCV-on-mac" data-for="ë’¤ì£½ë°•ì£½/OpenCV-on-mac">[OpenCV] Xcode OpenCV ì„¤ì¹˜ ë° ì„¸íŒ…</a></li><li><a href="../../ë’¤ì£½ë°•ì£½/Rosetta+Conda-Env-Setting" data-for="ë’¤ì£½ë°•ì£½/Rosetta+Conda-Env-Setting">[Conda] Rosetta + Conda Env ì„¸íŒ…</a></li><li><a href="../../ë’¤ì£½ë°•ì£½/Rosetta+Conda-ROS-Setting" data-for="ë’¤ì£½ë°•ì£½/Rosetta+Conda-ROS-Setting">[ROS] Rosetta + Condaë¡œ ROS ì„¸íŒ…</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.1.5</a>, Â© 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></body><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="../../postscript.js" type="module"></script></html>